!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chalks=t()}}(function(){return function(){return function t(e,r,i){function n(a,o){if(!r[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){return n(e[a][1][t]||t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}}()({1:[function(t,e,r){(function(){var t,i,n,s,a,o,h,l,c,u,f,d,p,b,g,y,v,x,m,w,M,k,R,E,P,N,S,L,C,j,B,_,V,q,A,O,I,z,T,F,W,J,G,D,H,Y,X,U,$,K,Z,Q,tt,et,rt,it,nt,st,at,ot,ht,lt,ct,ut,ft,dt,pt,bt,gt,yt,vt,xt,mt,wt,Mt,kt,Rt,Et,Pt,Nt,St=[].slice;kt=function(){var t,e,r,i,n;for(t={},i=0,e=(n="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;i<e;i++)r=n[i],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),X=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Rt=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},M=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},s=Math.PI,vt=Math.round,R=Math.cos,L=Math.floor,rt=Math.pow,U=Math.log,mt=Math.sin,wt=Math.sqrt,b=Math.atan2,Z=Math.max,p=Math.abs,h=2*s,a=s/3,i=s/180,o=180/s,(w=function(){return arguments[0]instanceof t?arguments[0]:function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,arguments,function(){})}).default=w,d=[],void 0!==e&&null!==e&&null!=e.exports&&(e.exports=w),(void 0!==r&&null!==r?r:this).chroma=w,w.version="1.4.1",f={},c=[],u=!1,t=function(){function t(){var t,e,r,i,n,s,a,o,h;for(s=this,e=[],o=0,i=arguments.length;o<i;o++)null!=(t=arguments[o])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=f[a])s._rgb=M(f[a](Rt(e.slice(0,-1))));else{for(u||(c=c.sort(function(t,e){return e.p-t.p}),u=!0),h=0,n=c.length;h<n&&!(a=(r=c[h]).test.apply(r,e));h++);a&&(s._rgb=M(f[a].apply(f,e)))}null==s._rgb&&console.warn("unknown format: "+e),null==s._rgb&&(s._rgb=[0,0,0]),3===s._rgb.length&&s._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),w._input=f,w.brewer=x={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],x)e.push(x[t.toLowerCase()]=x[t])}(),w.colors=Et={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},J=function(){var t,e,r,i,s,a,o;return i=(e=Rt(arguments))[0],t=e[1],r=e[2],a=(i+16)/116,s=isNaN(t)?a:a+t/500,o=isNaN(r)?a:a-r/200,a=n.Yn*G(a),s=n.Xn*G(s),o=n.Zn*G(o),[Nt(3.2404542*s-1.5371385*a-.4985314*o),Nt(-.969266*s+1.8760108*a+.041556*o),r=Nt(.0556434*s-.2040259*a+1.0572252*o),e.length>3?e[3]:1]},Nt=function(t){return 255*(t<=.00304?12.92*t:1.055*rt(t,1/2.4)-.055)},G=function(t){return t>n.t1?t*t*t:n.t2*(t-n.t0)},n={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ct=function(){var t,e,r,i,n,s,a;return r=(i=Rt(arguments))[0],e=i[1],t=i[2],s=(n=bt(r,e,t))[0],[116*(a=n[1])-16,500*(s-a),200*(a-n[2])]},gt=function(t){return(t/=255)<=.04045?t/12.92:rt((t+.055)/1.055,2.4)},Pt=function(t){return t>n.t3?rt(t,1/3):t/n.t2+n.t0},bt=function(){var t,e,r,i;return r=(i=Rt(arguments))[0],e=i[1],t=i[2],r=gt(r),e=gt(e),t=gt(t),[Pt((.4124564*r+.3575761*e+.1804375*t)/n.Xn),Pt((.2126729*r+.7151522*e+.072175*t)/n.Yn),Pt((.0193339*r+.119192*e+.9503041*t)/n.Zn)]},w.lab=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["lab"]),function(){})},f.lab=J,t.prototype.lab=function(){return ct(this._rgb)},g=function(t){var e,r,i,n,s,a,o,h,l,c,u;return 2===(t=function(){var e,r,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(w(n));return i}()).length?(l=function(){var e,r,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(n.lab());return i}(),s=l[0],a=l[1],e=function(t){var e,r;return r=function(){var r,i;for(i=[],e=r=0;r<=2;e=++r)i.push(s[e]+t*(a[e]-s[e]));return i}(),w.lab.apply(w,r)}):3===t.length?(c=function(){var e,r,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(n.lab());return i}(),s=c[0],a=c[1],o=c[2],e=function(t){var e,r;return r=function(){var r,i;for(i=[],e=r=0;r<=2;e=++r)i.push((1-t)*(1-t)*s[e]+2*(1-t)*t*a[e]+t*t*o[e]);return i}(),w.lab.apply(w,r)}):4===t.length?(u=function(){var e,r,i;for(i=[],r=0,e=t.length;r<e;r++)n=t[r],i.push(n.lab());return i}(),s=u[0],a=u[1],o=u[2],h=u[3],e=function(t){var e,r;return r=function(){var r,i;for(i=[],e=r=0;r<=2;e=++r)i.push((1-t)*(1-t)*(1-t)*s[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*o[e]+t*t*t*h[e]);return i}(),w.lab.apply(w,r)}):5===t.length&&(r=g(t.slice(0,3)),i=g(t.slice(2,5)),e=function(t){return t<.5?r(2*t):i(2*(t-.5))}),e},w.bezier=function(t){var e;return(e=g(t)).scale=function(){return w.scale(e)},e},w.cubehelix=function(t,e,r,i,n){var s,a,o;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==i&&(i=1),null==n&&(n=[0,1]),s=0,"array"===kt(n)?a=n[1]-n[0]:(a=0,n=[n,n]),(o=function(o){var l,c,u,f,d;return l=h*((t+120)/360+e*o),f=rt(n[0]+a*o,i),c=(0!==s?r[0]+o*s:r)*f*(1-f)/2,u=R(l),d=mt(l),w(M([255*(f+c*(-.14861*u+1.78277*d)),255*(f+c*(-.29227*u-.90649*d)),255*(f+c*(1.97294*u)),1]))}).start=function(e){return null==e?t:(t=e,o)},o.rotations=function(t){return null==t?e:(e=t,o)},o.gamma=function(t){return null==t?i:(i=t,o)},o.hue=function(t){return null==t?r:("array"===kt(r=t)?0===(s=r[1]-r[0])&&(r=r[1]):s=0,o)},o.lightness=function(t){return null==t?n:("array"===kt(t)?(n=t,a=t[1]-t[0]):(n=[t,t],a=0),o)},o.scale=function(){return w.scale(o)},o.hue(r),o},w.random=function(){var e,r;for("0123456789abcdef",e="#",r=0;r<6;++r)e+="0123456789abcdef".charAt(L(16*Math.random()));return new t(e)},d=[],w.interpolate=A=function(t,e,r,i){var n,s,a,o;for(null==r&&(r=.5),null==i&&(i="rgb"),"object"!==kt(t)&&(t=w(t)),"object"!==kt(e)&&(e=w(e)),a=0,s=d.length;a<s;a++)if(i===(n=d[a])[0]){o=n[1](t,e,r,i);break}if(null==o)throw"color mode "+i+" is not supported";return o.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},t.prototype.interpolate=function(t,e,r){return A(this,t,e,r)},w.mix=A,t.prototype.mix=t.prototype.interpolate,f.rgb=function(){var t,e,r,i;for(t in r=[],e=Rt(arguments))i=e[t],r.push(i);return r},w.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},t.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},c.push({p:3,test:function(t){var e;return e=Rt(arguments),"array"===kt(e)&&3===e.length?"rgb":4===e.length&&"number"===kt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),f.lrgb=f.rgb,z=function(e,r,i,n){var s,a;return s=e._rgb,a=r._rgb,new t(wt(rt(s[0],2)*(1-i)+rt(a[0],2)*i),wt(rt(s[1],2)*(1-i)+rt(a[1],2)*i),wt(rt(s[2],2)*(1-i)+rt(a[2],2)*i),n)},l=function(e){var r,i,n,s,a;for(r=1/e.length,a=[0,0,0,0],n=0,i=e.length;n<i;n++)s=e[n]._rgb,a[0]+=rt(s[0],2)*r,a[1]+=rt(s[1],2)*r,a[2]+=rt(s[2],2)*r,a[3]+=s[3]*r;return a[0]=wt(a[0]),a[1]=wt(a[1]),a[2]=wt(a[2]),a[3]>1&&(a[3]=1),new t(M(a))},d.push(["lrgb",z]),w.average=function(t,e){var r,i,n,a,o,h,c,u,f,d,p,g,y;if(null==e&&(e="rgb"),f=t.length,c=(t=t.map(function(t){return w(t)})).splice(0,1)[0],"lrgb"===e)return l(t);for(u in a=[],o=0,h=0,g=c.get(e))g[u]=g[u]||0,a.push(isNaN(g[u])?0:1),"h"!==e.charAt(u)||isNaN(g[u])||(r=g[u]/180*s,o+=R(r),h+=mt(r));for(i=c.alpha(),p=0,d=t.length;p<d;p++)for(u in y=(n=t[p]).get(e),i+=n.alpha(),g)isNaN(y[u])||(a[u]+=1,"h"===e.charAt(u)?(r=y[u]/180*s,o+=R(r),h+=mt(r)):g[u]+=y[u]);for(u in g)if("h"===e.charAt(u)){for(r=b(h/a[u],o/a[u])/s*180;r<0;)r+=360;for(;r>=360;)r-=360;g[u]=r}else g[u]=g[u]/a[u];return w(g,e).alpha(i/f)},j=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,vt((255&r)/255*100)/100];if(null!=f.css&&(e=f.css(t)))return e;throw"unknown color: "+t},at=function(t,e){var r,i,n,s,a,o;return null==e&&(e="auto"),a=t[0],n=t[1],i=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),n=Math.round(n),i=Math.round(i),o=(o="000000"+(a<<16|n<<8|i).toString(16)).substr(o.length-6),s=(s="0"+vt(255*r).toString(16)).substr(s.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return o+s;case"argb":return s+o;default:return o}}()},f.hex=function(t){return j(t)},w.hex=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="auto"),at(this._rgb,t)},c.push({p:4,test:function(t){if(1===arguments.length&&"string"===kt(t))return"hex"}}),V=function(){var t,e,r,i,n,s,a,o,h,l,c,u,f,d;if(n=(t=Rt(arguments))[0],c=t[1],a=t[2],0===c)h=i=e=255*a;else{for(d=[0,0,0],r=[0,0,0],u=2*a-(f=a<.5?a*(1+c):a+c-a*c),n/=360,d[0]=n+1/3,d[1]=n,d[2]=n-1/3,s=o=0;o<=2;s=++o)d[s]<0&&(d[s]+=1),d[s]>1&&(d[s]-=1),6*d[s]<1?r[s]=u+6*(f-u)*d[s]:2*d[s]<1?r[s]=f:3*d[s]<2?r[s]=u+(f-u)*(2/3-d[s])*6:r[s]=u;h=(l=[vt(255*r[0]),vt(255*r[1]),vt(255*r[2])])[0],i=l[1],e=l[2]}return t.length>3?[h,i,e,t[3]]:[h,i,e]},ht=function(t,e,r){var i,n,s,a,o;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,s=Math.min(t,e,r),n=((Z=Math.max(t,e,r))+s)/2,Z===s?(o=0,i=Number.NaN):o=n<.5?(Z-s)/(Z+s):(Z-s)/(2-Z-s),t===Z?i=(e-r)/(Z-s):e===Z?i=2+(r-t)/(Z-s):r===Z&&(i=4+(t-e)/(Z-s)),(i*=60)<0&&(i+=360),[i,o,n]},w.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["hsl"]),function(){})},f.hsl=V,t.prototype.hsl=function(){return ht(this._rgb)},q=function(){var t,e,r,i,n,s,a,o,h,l,c,u,f,d,p,b,g,y;if(n=(t=Rt(arguments))[0],b=t[1],y=t[2],y*=255,0===b)h=i=e=y;else switch(360===n&&(n=0),n>360&&(n-=360),n<0&&(n+=360),a=y*(1-b),o=y*(1-b*(r=(n/=60)-(s=L(n)))),g=y*(1-b*(1-r)),s){case 0:h=(l=[y,g,a])[0],i=l[1],e=l[2];break;case 1:h=(c=[o,y,a])[0],i=c[1],e=c[2];break;case 2:h=(u=[a,y,g])[0],i=u[1],e=u[2];break;case 3:h=(f=[a,o,y])[0],i=f[1],e=f[2];break;case 4:h=(d=[g,a,y])[0],i=d[1],e=d[2];break;case 5:h=(p=[y,a,o])[0],i=p[1],e=p[2]}return[h,i,e,t.length>3?t[3]:1]},lt=function(){var t,e,r,i,n,s,a,o,h;return s=(a=Rt(arguments))[0],r=a[1],t=a[2],n=Math.min(s,r,t),e=(Z=Math.max(s,r,t))-n,h=Z/255,0===Z?(i=Number.NaN,o=0):(o=e/Z,s===Z&&(i=(r-t)/e),r===Z&&(i=2+(t-s)/e),t===Z&&(i=4+(s-r)/e),(i*=60)<0&&(i+=360)),[i,o,h]},w.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["hsv"]),function(){})},f.hsv=q,t.prototype.hsv=function(){return lt(this._rgb)},tt=function(t){return"number"===kt(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=Rt(arguments))[0]<<16)+(t[1]<<8)+t[2]},w.num=function(e){return new t(e,"num")},t.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},f.num=tt,c.push({p:1,test:function(t){if(1===arguments.length&&"number"===kt(t)&&t>=0&&t<=16777215)return"num"}}),C=function(){var t,e,r,i,n,s,a,o,h,l,c,u,f,d,p,b,g,y,v,x;if(o=(r=Rt(arguments))[0],n=r[1],e=r[2],a=a/100*255,t=255*(n/=100),0===n)u=a=i=e;else switch(360===o&&(o=0),o>360&&(o-=360),o<0&&(o+=360),c=(l=e*(1-n))+t*(1-(s=(o/=60)-(h=L(o)))),v=l+t*s,x=l+t,h){case 0:u=(f=[x,v,l])[0],a=f[1],i=f[2];break;case 1:u=(d=[c,x,l])[0],a=d[1],i=d[2];break;case 2:u=(p=[l,x,v])[0],a=p[1],i=p[2];break;case 3:u=(b=[l,c,x])[0],a=b[1],i=b[2];break;case 4:u=(g=[v,l,x])[0],a=g[1],i=g[2];break;case 5:u=(y=[x,l,c])[0],a=y[1],i=y[2]}return[u,a,i,r.length>3?r[3]:1]},st=function(){var t,e,r,i,n,s,a,o,h;return o=(h=Rt(arguments))[0],n=h[1],e=h[2],a=Math.min(o,n,e),r=100*(i=(Z=Math.max(o,n,e))-a)/255,t=a/(255-i)*100,0===i?s=Number.NaN:(o===Z&&(s=(n-e)/i),n===Z&&(s=2+(e-o)/i),e===Z&&(s=4+(o-n)/i),(s*=60)<0&&(s+=360)),[s,r,t]},w.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["hcg"]),function(){})},f.hcg=C,t.prototype.hcg=function(){return st(this._rgb)},E=function(t){var e,r,i,n,s,a,o,h;if(t=t.toLowerCase(),null!=w.colors&&w.colors[t])return j(w.colors[t]);if(s=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(o=s.slice(1,4),n=a=0;a<=2;n=++a)o[n]=+o[n];o[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(o=s.slice(1,5),n=h=0;h<=3;n=++h)o[n]=+o[n];else if(s=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(o=s.slice(1,4),n=e=0;e<=2;n=++e)o[n]=vt(2.55*o[n]);o[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(o=s.slice(1,5),n=r=0;r<=2;n=++r)o[n]=vt(2.55*o[n]);o[3]=+o[3]}else(s=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((i=s.slice(1,4))[1]*=.01,i[2]*=.01,(o=V(i))[3]=1):(s=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((i=s.slice(1,4))[1]*=.01,i[2]*=.01,(o=V(i))[3]=+s[4]);return o},nt=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(vt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vt).join(",")+","+t[3]+")":void 0},yt=function(t){return vt(100*t)/100},_=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=yt(t[0]||0),t[1]=yt(100*t[1])+"%",t[2]=yt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},f.css=function(t){return E(t)},w.css=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?nt(this._rgb):"hsl"===t.slice(0,3)?_(this.hsl(),this.alpha()):void 0},f.named=function(t){return j(Et[t])},c.push({p:5,test:function(t){if(1===arguments.length&&null!=Et[t])return"named"}}),t.prototype.name=function(t){var e,r;for(r in arguments.length&&(Et[t]&&(this._rgb=j(Et[t])),this._rgb[3]=1),e=this.hex("rgb"),Et)if(e===Et[r])return r;return e},D=function(){var t,e,r,n;return r=(n=Rt(arguments))[0],t=n[1],e=n[2],[r,R(e*=i)*t,mt(e)*t]},H=function(){var t,e,r,i,n,s,a,o,h;return a=(r=Rt(arguments))[0],n=r[1],s=r[2],t=(o=D(a,n,s))[0],e=o[1],i=o[2],[(h=J(t,e,i))[0],h[1],i=h[2],r.length>3?r[3]:1]},W=function(){var t,e,r,i,n,s;return n=(s=Rt(arguments))[0],t=s[1],e=s[2],r=wt(t*t+e*e),i=(b(e,t)*o+360)%360,0===vt(1e4*r)&&(i=Number.NaN),[n,r,i]},ut=function(){var t,e,r,i,n,s,a;return n=(s=Rt(arguments))[0],r=s[1],e=s[2],i=(a=ct(n,r,e))[0],t=a[1],e=a[2],W(i,t,e)},w.lch=function(){var e;return e=Rt(arguments),new t(e,"lch")},w.hcl=function(){var e;return e=Rt(arguments),new t(e,"hcl")},f.lch=H,f.hcl=function(){var t,e,r,i;return e=(i=Rt(arguments))[0],t=i[1],r=i[2],H([r,t,e])},t.prototype.lch=function(){return ut(this._rgb)},t.prototype.hcl=function(){return ut(this._rgb).reverse()},it=function(t){var e,r,i,n,s,a;return null==t&&(t="rgb"),s=(a=Rt(arguments))[0],i=a[1],e=a[2],i/=255,e/=255,[(1-(s/=255)-(n=1-Math.max(s,Math.max(i,e))))*(r=n<1?1/(1-n):0),(1-i-n)*r,(1-e-n)*r,n]},k=function(){var t,e,r,i,n,s;return r=(e=Rt(arguments))[0],n=e[1],s=e[2],i=e[3],t=e.length>4?e[4]:1,1===i?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-i),n>=1?0:255*(1-n)*(1-i),s>=1?0:255*(1-s)*(1-i),t]},f.cmyk=function(){return k(Rt(arguments))},w.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return it(this._rgb)},f.gl=function(){var t,e,r,i,n;for(i=function(){var t,r;for(e in r=[],t=Rt(arguments))n=t[e],r.push(n);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)i[t]*=255;return i},w.gl=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},ft=function(t,e,r){var i;return t=(i=Rt(arguments))[0],e=i[1],r=i[2],.2126*(t=$(t))+.7152*(e=$(e))+.0722*(r=$(r))},$=function(t){return(t/=255)<=.03928?t/12.92:rt((t+.055)/1.055,2.4)},F=function(e,r,i,n){var s,a;return s=e._rgb,a=r._rgb,new t(s[0]+i*(a[0]-s[0]),s[1]+i*(a[1]-s[1]),s[2]+i*(a[2]-s[2]),n)},d.push(["rgb",F]),t.prototype.luminance=function(t,e){var r,i,n,s,a;return null==e&&(e="rgb"),arguments.length?(s=this._rgb,0===t?s=[0,0,0,this._rgb[3]]:1===t?s=[255,255,255,this[3]]:(r=ft(this._rgb),i=1e-7,n=20,a=function(r,s){var o,h;return o=(h=r.interpolate(s,.5,e)).luminance(),Math.abs(t-o)<i||!n--?h:o>t?a(r,h):a(h,s)},s=r>t?a(w("black"),this).rgba():a(this,w("white")).rgba()),w(s).alpha(this.alpha())):ft(this._rgb)},Mt=function(t){var e,r,i,n;return(n=t/100)<66?(i=255,r=-155.25485562709179-.44596950469579133*(r=n-2)+104.49216199393888*U(r),e=n<20?0:.8274096064007395*(e=n-10)-254.76935184120902+115.67994401066147*U(e)):(i=351.97690566805693+.114206453784165*(i=n-55)-40.25366309332127*U(i),r=325.4494125711974+.07943456536662342*(r=n-50)-28.0852963507957*U(r),e=255),[i,r,e]},pt=function(){var t,e,r,i,n,s,a;for(i=(n=Rt(arguments))[0],n[1],t=n[2],r=1e3,e=4e4,.4;e-r>.4;)(s=Mt(a=.5*(e+r)))[2]/s[0]>=t/i?e=a:r=a;return vt(a)},w.temperature=w.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["temperature"]),function(){})},f.temperature=f.kelvin=f.K=Mt,t.prototype.temperature=function(){return pt(this._rgb)},t.prototype.kelvin=t.prototype.temperature,w.contrast=function(e,r){var i,n,s,a;return"string"!==(s=kt(e))&&"number"!==s||(e=new t(e)),"string"!==(a=kt(r))&&"number"!==a||(r=new t(r)),(i=e.luminance())>(n=r.luminance())?(i+.05)/(n+.05):(n+.05)/(i+.05)},w.distance=function(e,r,i){var n,s,a,o,h,l,c;for(s in null==i&&(i="lab"),"string"!==(h=kt(e))&&"number"!==h||(e=new t(e)),"string"!==(l=kt(r))&&"number"!==l||(r=new t(r)),a=e.get(i),o=r.get(i),c=0,a)c+=(n=(a[s]||0)-(o[s]||0))*n;return Math.sqrt(c)},w.deltaE=function(e,r,i,n){var a,o,h,l,c,u,f,d,g,y,v,x,m,w,M,k,E,P,N,S,L,C,j,B;for(null==i&&(i=1),null==n&&(n=1),"string"!==(M=kt(e))&&"number"!==M||(e=new t(e)),"string"!==(k=kt(r))&&"number"!==k||(r=new t(r)),a=(E=e.lab())[0],h=E[1],c=E[2],o=(P=r.lab())[0],l=P[1],u=P[2],f=wt(h*h+c*c),d=wt(l*l+u*u),S=a<16?.511:.040975*a/(1+.01765*a),N=.0638*f/(1+.0131*f)+.638,w=f<1e-6?0:180*b(c,h)/s;w<0;)w+=360;for(;w>=360;)w-=360;return L=w>=164&&w<=345?.56+p(.2*R(s*(w+168)/180)):.36+p(.4*R(s*(w+35)/180)),m=wt((g=f*f*f*f)/(g+1900)),wt((C=(a-o)/(i*S))*C+(j=(x=f-d)/(n*N))*j+((y=h-l)*y+(v=c-u)*v-x*x)/((B=N*(m*L+1-m))*B))},t.prototype.get=function(t){var e,r,i,n,s;return this,i=(n=t.split("."))[0],e=n[1],s=this[i](),e?(r=i.indexOf(e))>-1?s[r]:console.warn("unknown channel "+e+" in mode "+i):s},t.prototype.set=function(t,e){var r,i,n,s,a;if(this,n=(s=t.split("."))[0],r=s[1])if(a=this[n](),(i=n.indexOf(r))>-1)if("string"===kt(e))switch(e.charAt(0)){case"+":case"-":a[i]+=+e;break;case"*":a[i]*=+e.substr(1);break;case"/":a[i]/=+e.substr(1);break;default:a[i]=+e}else a[i]=e;else console.warn("unknown channel "+r+" in mode "+n);else a=e;return w(a,n).alpha(this.alpha())},t.prototype.clipped=function(){return this._rgb._clipped||!1},t.prototype.alpha=function(t){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},t.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=n.Kn*t,w.lab(e).alpha(this.alpha())},t.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*n.Kn,e[1]<0&&(e[1]=0),w.lch(e).alpha(this.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),w(e[0]*t,e[1]*t,e[2]*t,t)},Q=function(t,e){return t*e/255},P=function(t,e){return t>e?e:t},Y=function(t,e){return t>e?t:e},xt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},et=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},m=function(t,e){return 255*(1-(1-e/255)/(t/255))},N=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t},(y=function(t,e,r){if(!y[r])throw"unknown blend mode "+r;return y[r](t,e)}).normal=(v=function(t){return function(e,r){var i,n;return i=w(r).rgb(),n=w(e).rgb(),w(t(i,n),"rgb")}})((S=function(t){return function(e,r){var i,n,s;for(s=[],i=n=0;n<=3;i=++n)s[i]=t(e[i],r[i]);return s}})(function(t,e){return t})),y.multiply=v(S(Q)),y.screen=v(S(xt)),y.overlay=v(S(et)),y.darken=v(S(P)),y.lighten=v(S(Y)),y.dodge=v(S(N)),y.burn=v(S(m)),w.blend=y,w.analyze=function(t){var e,r,i,n;for(i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(n=t[r])||isNaN(n)||(i.values.push(n),i.sum+=n,n<i.min&&(i.min=n),n>i.max&&(i.max=n),i.count+=1);return i.domain=[i.min,i.max],i.limits=function(t,e){return w.limits(i,t,e)},i},w.scale=function(t,e){var r,i,n,s,a,o,h,l,c,u,f,d,p,b,g,y,v,x,m,M,k;return c="rgb",u=w("#ccc"),b=0,!1,a=[0,1],p=[],d=[0,0],r=!1,n=[],f=!1,l=0,h=1,s=!1,i={},g=!0,o=1,M=function(t){var e,r,i,s,a,o;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===kt(t)&&null!=w.brewer&&(t=w.brewer[t]||w.brewer[t.toLowerCase()]||t),"array"===kt(t)){for(1===t.length&&(t=[t[0],t[0]]),e=i=0,s=(t=t.slice(0)).length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i)r=t[e],"string"===kt(r)&&(t[e]=w(r));for(p.length=0,e=o=0,a=t.length-1;0<=a?o<=a:o>=a;e=0<=a?++o:--o)p.push(e/(t.length-1))}return m(),n=t},v=function(t){var e,i;if(null!=r){for(i=r.length-1,e=0;e<i&&t>=r[e];)e++;return e-1}return 0},k=function(t){return t},function(t){var e,i,n,s,a;return a=t,r.length>2&&(s=r.length-1,e=v(t),n=r[0]+(r[1]-r[0])*(0+.5*b),i=r[s-1]+(r[s]-r[s-1])*(1-.5*b),a=l+(r[e]+.5*(r[e+1]-r[e])-n)/(i-n)*(h-l)),a},x=function(t,e){var s,a,f,b,y,x,m;if(null==e&&(e=!1),isNaN(t)||null===t)return u;if(m=e?t:r&&r.length>2?v(t)/(r.length-2):h!==l?(t-l)/(h-l):1,e||(m=k(m)),1!==o&&(m=rt(m,o)),m=d[0]+m*(1-d[0]-d[1]),m=Math.min(1,Math.max(0,m)),f=Math.floor(1e4*m),g&&i[f])s=i[f];else{if("array"===kt(n))for(a=b=0,x=p.length-1;0<=x?b<=x:b>=x;a=0<=x?++b:--b){if(m<=(y=p[a])){s=n[a];break}if(m>=y&&a===p.length-1){s=n[a];break}if(m>y&&m<p[a+1]){m=(m-y)/(p[a+1]-y),s=w.interpolate(n[a],n[a+1],m,c);break}}else"function"===kt(n)&&(s=n(m));g&&(i[f]=s)}return s},m=function(){return i={}},M(t),(y=function(t){var e;return e=w(x(t)),f&&e[f]?e[f]():e}).classes=function(t){var e;return null!=t?("array"===kt(t)?(r=t,a=[t[0],t[t.length-1]]):(e=w.analyze(a),r=0===t?[e.min,e.max]:w.limits(e,"e",t)),y):r},y.domain=function(t){var e,r,i,s,o,c,u;if(!arguments.length)return a;if(l=t[0],h=t[t.length-1],p=[],i=n.length,t.length===i&&l!==h)for(o=0,s=t.length;o<s;o++)r=t[o],p.push((r-l)/(h-l));else for(e=u=0,c=i-1;0<=c?u<=c:u>=c;e=0<=c?++u:--u)p.push(e/(i-1));return a=[l,h],y},y.mode=function(t){return arguments.length?(c=t,m(),y):c},y.range=function(t,e){return M(t),y},y.out=function(t){return f=t,y},y.spread=function(t){return arguments.length?(b=t,y):b},y.correctLightness=function(t){return null==t&&(t=!0),s=t,m(),k=s?function(t){var e,r,i,n,s,a,o,h,l;for(e=x(0,!0).lab()[0],r=x(1,!0).lab()[0],o=e>r,i=x(t,!0).lab()[0],n=i-(s=e+(r-e)*t),h=0,l=1,a=20;Math.abs(n)>.01&&a-- >0;)o&&(n*=-1),n<0?(h=t,t+=.5*(l-t)):(l=t,t+=.5*(h-t)),i=x(t,!0).lab()[0],n=i-s;return t}:function(t){return t},y},y.padding=function(t){return null!=t?("number"===kt(t)&&(t=[t,t]),d=t,y):d},y.colors=function(e,i){var s,o,h,l,c,u,f,d;if(arguments.length<2&&(i="hex"),c=[],0===arguments.length)c=n.slice(0);else if(1===e)c=[y(.5)];else if(e>1)o=a[0],s=a[1]-o,c=function(){u=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)u.push(t);return u}.apply(this).map(function(t){return y(o+t/(e-1)*s)});else{if(t=[],f=[],r&&r.length>2)for(h=d=1,l=r.length;1<=l?d<l:d>l;h=1<=l?++d:--d)f.push(.5*(r[h-1]+r[h]));else f=a;c=f.map(function(t){return y(t)})}return w[i]&&(c=c.map(function(t){return t[i]()})),c},y.cache=function(t){return null!=t?(g=t,y):g},y.gamma=function(t){return null!=t?(o=t,y):o},y.nodata=function(t){return null!=t?(u=w(t),y):u},y},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(t,e,r){var i,n,s,a,o,h;if(o={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),i=function(t){null==t||isNaN(t)||(o.values.push(t),o.sum+=t,t<o.min&&(o.min=t),t>o.max&&(o.max=t),o.count+=1)},h=function(t,n){if(r(t,n))return null!=e&&"function"===kt(e)?i(e(t)):null!=e&&"string"===kt(e)||"number"===kt(e)?i(t[e]):i(t)},"array"===kt(t))for(a=0,s=t.length;a<s;a++)h(t[a]);else for(n in t)h(t[n],n);return o.domain=[o.min,o.max],o.limits=function(t,e){return w.limits(o,t,e)},o},w.limits=function(t,e,r){var i,n,s,a,o,h,l,c,u,f,d,b,g,y,v,x,m,M,k,R,E,P,N,S,C,j,B,_,V,q,A,O,I,z,T,F,W,J,G,D,H,Y,X,$,K,Q,tt,et,it,nt,st,at,ot,ht,lt;if(null==e&&(e="equal"),null==r&&(r=7),"array"===kt(t)&&(t=w.analyze(t)),C=t.min,Z=t.max,t.sum,ht=t.values.sort(function(t,e){return t-e}),1===r)return[C,Z];if(N=[],"c"===e.substr(0,1)&&(N.push(C),N.push(Z)),"e"===e.substr(0,1)){for(N.push(C),R=A=1,T=r-1;1<=T?A<=T:A>=T;R=1<=T?++A:--A)N.push(C+R/r*(Z-C));N.push(Z)}else if("l"===e.substr(0,1)){if(C<=0)throw"Logarithmic scales are only possible for values > 0";for(j=Math.LOG10E*U(C),S=Math.LOG10E*U(Z),N.push(C),R=lt=1,F=r-1;1<=F?lt<=F:lt>=F;R=1<=F?++lt:--lt)N.push(rt(10,j+R/r*(S-j)));N.push(Z)}else if("q"===e.substr(0,1)){for(N.push(C),R=i=1,Y=r-1;1<=Y?i<=Y:i>=Y;R=1<=Y?++i:--i)O=(ht.length-1)*R/r,(I=L(O))===O?N.push(ht[I]):(z=O-I,N.push(ht[I]*(1-z)+ht[I+1]*z));N.push(Z)}else if("k"===e.substr(0,1)){for(_=ht.length,y=new Array(_),M=new Array(r),nt=!0,V=0,x=null,(x=[]).push(C),R=n=1,X=r-1;1<=X?n<=X:n>=X;R=1<=X?++n:--n)x.push(C+R/r*(Z-C));for(x.push(Z);nt;){for(E=s=0,$=r-1;0<=$?s<=$:s>=$;E=0<=$?++s:--s)M[E]=0;for(R=a=0,K=_-1;0<=K?a<=K:a>=K;R=0<=K?++a:--a){for(ot=ht[R],B=Number.MAX_VALUE,E=o=0,Q=r-1;0<=Q?o<=Q:o>=Q;E=0<=Q?++o:--o)(k=p(x[E]-ot))<B&&(B=k,v=E);M[v]++,y[R]=v}for(q=new Array(r),E=h=0,tt=r-1;0<=tt?h<=tt:h>=tt;E=0<=tt?++h:--h)q[E]=null;for(R=l=0,et=_-1;0<=et?l<=et:l>=et;R=0<=et?++l:--l)null===q[m=y[R]]?q[m]=ht[R]:q[m]+=ht[R];for(E=c=0,it=r-1;0<=it?c<=it:c>=it;E=0<=it?++c:--c)q[E]*=1/M[E];for(nt=!1,E=u=0,W=r-1;0<=W?u<=W:u>=W;E=0<=W?++u:--u)if(q[E]!==x[R]){nt=!0;break}x=q,++V>200&&(nt=!1)}for(P={},E=f=0,J=r-1;0<=J?f<=J:f>=J;E=0<=J?++f:--f)P[E]=[];for(R=d=0,G=_-1;0<=G?d<=G:d>=G;R=0<=G?++d:--d)P[m=y[R]].push(ht[R]);for(st=[],E=b=0,D=r-1;0<=D?b<=D:b>=D;E=0<=D?++b:--b)st.push(P[E][0]),st.push(P[E][P[E].length-1]);for(st=st.sort(function(t,e){return t-e}),N.push(st[0]),R=g=1,H=st.length-1;g<=H;R=g+=2)at=st[R],isNaN(at)||-1!==N.indexOf(at)||N.push(at)}return N},B=function(t,e,r){var i,n,s,o;return t=(i=Rt(arguments))[0],e=i[1],r=i[2],isNaN(t)&&(t=0),(t/=360)<1/3?s=1-((n=(1-e)/3)+(o=(1+e*R(h*t)/R(a-h*t))/3)):t<2/3?n=1-((o=(1-e)/3)+(s=(1+e*R(h*(t-=1/3))/R(a-h*t))/3)):o=1-((s=(1-e)/3)+(n=(1+e*R(h*(t-=2/3))/R(a-h*t))/3)),[255*(o=X(r*o*3)),255*(s=X(r*s*3)),255*(n=X(r*n*3)),i.length>3?i[3]:1]},ot=function(){var t,e,r,i,n,s,a;return n=(s=Rt(arguments))[0],e=s[1],t=s[2],h=2*Math.PI,n/=255,e/=255,t/=255,0===(a=1-Math.min(n,e,t)/(i=(n+e+t)/3))?r=0:(r=(n-e+(n-t))/2,r/=Math.sqrt((n-e)*(n-e)+(n-t)*(e-t)),r=Math.acos(r),t>e&&(r=h-r),r/=h),[360*r,a,i]},w.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var i=new r,n=t.apply(i,e);return Object(n)===n?n:i}(t,St.call(arguments).concat(["hsi"]),function(){})},f.hsi=B,t.prototype.hsi=function(){return ot(this._rgb)},O=function(t,e,r,i){var n,s,a,o,h,l,c,u,f,d;return"hsl"===i?(f=t.hsl(),d=e.hsl()):"hsv"===i?(f=t.hsv(),d=e.hsv()):"hcg"===i?(f=t.hcg(),d=e.hcg()):"hsi"===i?(f=t.hsi(),d=e.hsi()):"lch"!==i&&"hcl"!==i||(i="hcl",f=t.hcl(),d=e.hcl()),"h"===i.substr(0,1)&&(s=f[0],c=f[1],o=f[2],a=d[0],u=d[1],h=d[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?n=Number.NaN:(n=a,1!==o&&0!==o||"hsv"===i||(l=u)):(n=s,1!==h&&0!==h||"hsv"===i||(l=c)):n=s+r*(a>s&&a-s>180?a-(s+360):a<s&&s-a>180?a+360-s:a-s),null==l&&(l=c+r*(u-c)),w[i](n,l,o+r*(h-o))},T=function(t,e,r,i){var n,s;return n=t.num(),s=e.num(),w.num(n+(s-n)*r,"num")},(d=d.concat(function(){var t,e,r,i;for(i=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)K=r[e],i.push([K,O]);return i}())).push(["num",T]),I=function(e,r,i,n){var s,a;return s=e.lab(),a=r.lab(),new t(s[0]+i*(a[0]-s[0]),s[1]+i*(a[1]-s[1]),s[2]+i*(a[2]-s[2]),n)},d.push(["lab",I])}).call(this)},{}],2:[function(t,e,r){function i(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}i.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var t=this.beachline.getFirst(this.beachline.root);t;)this.beachsectionJunkyard.push(t),t=t.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},i.prototype.sqrt=Math.sqrt,i.prototype.abs=Math.abs,i.prototype.ε=i.ε=1e-9,i.prototype.invε=i.invε=1/i.ε,i.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},i.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},i.prototype.greaterThanOrEqualWithEpsilon=function(t,e){return e-t<1e-9},i.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},i.prototype.lessThanOrEqualWithEpsilon=function(t,e){return t-e<1e-9},i.prototype.RBTree=function(){this.root=null},i.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){var r,i,n;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;r=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,r=t):(e.rbPrevious=e.rbNext=null,this.root=e,r=null);for(e.rbLeft=e.rbRight=null,e.rbParent=r,e.rbRed=!0,t=e;r&&r.rbRed;)r===(i=r.rbParent).rbLeft?(n=i.rbRight)&&n.rbRed?(r.rbRed=n.rbRed=!1,i.rbRed=!0,t=i):(t===r.rbRight&&(this.rbRotateLeft(r),r=(t=r).rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateRight(i)):(n=i.rbLeft)&&n.rbRed?(r.rbRed=n.rbRed=!1,i.rbRed=!0,t=i):(t===r.rbLeft&&(this.rbRotateRight(r),r=(t=r).rbParent),r.rbRed=!1,i.rbRed=!0,this.rbRotateLeft(i)),r=t.rbParent;this.root.rbRed=!1},i.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;var e,r,i=t.rbParent,n=t.rbLeft,s=t.rbRight;if(e=n?s?this.getFirst(s):n:s,i?i.rbLeft===t?i.rbLeft=e:i.rbRight=e:this.root=e,n&&s?(r=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=n,n.rbParent=e,e!==s?(i=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,i.rbLeft=t,e.rbRight=s,s.rbParent=e):(e.rbParent=i,i=e,t=e.rbRight)):(r=t.rbRed,t=e),t&&(t.rbParent=i),!r)if(t&&t.rbRed)t.rbRed=!1;else{var a;do{if(t===this.root)break;if(t===i.rbLeft){if((a=i.rbRight).rbRed&&(a.rbRed=!1,i.rbRed=!0,this.rbRotateLeft(i),a=i.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=i.rbRight),a.rbRed=i.rbRed,i.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(i),t=this.root;break}}else if((a=i.rbLeft).rbRed&&(a.rbRed=!1,i.rbRed=!0,this.rbRotateRight(i),a=i.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=i.rbLeft),a.rbRed=i.rbRed,i.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(i),t=this.root;break}a.rbRed=!0,t=i,i=i.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},i.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,r=t.rbRight,i=e.rbParent;i?i.rbLeft===e?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,e.rbParent=r,e.rbRight=r.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),r.rbLeft=e},i.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,r=t.rbLeft,i=e.rbParent;i?i.rbLeft===e?i.rbLeft=r:i.rbRight=r:this.root=r,r.rbParent=i,e.rbParent=r,e.rbLeft=r.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),r.rbRight=e},i.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},i.prototype.RBTree.prototype.getLast=function(t){for(;t.rbRight;)t=t.rbRight;return t},i.prototype.Diagram=function(t){this.site=t},i.prototype.Cell=function(t){this.site=t,this.halfedges=[],this.closeMe=!1},i.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this.closeMe=!1,this},i.prototype.createCell=function(t){var e=this.cellJunkyard.pop();return e?e.init(t):new this.Cell(t)},i.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,r=e.length;r--;)(t=e[r].edge).vb&&t.va||e.splice(r,1);return e.sort(function(t,e){return e.angle-t.angle}),e.length},i.prototype.Cell.prototype.getNeighborIds=function(){for(var t,e=[],r=this.halfedges.length;r--;)null!==(t=this.halfedges[r].edge).lSite&&t.lSite.voronoiId!=this.site.voronoiId?e.push(t.lSite.voronoiId):null!==t.rSite&&t.rSite.voronoiId!=this.site.voronoiId&&e.push(t.rSite.voronoiId);return e},i.prototype.Cell.prototype.getBbox=function(){for(var t,e,r,i=this.halfedges,n=i.length,s=1/0,a=1/0,o=-1/0,h=-1/0;n--;)e=(t=i[n].getStartpoint()).x,r=t.y,e<s&&(s=e),r<a&&(a=r),e>o&&(o=e),r>h&&(h=r);return{x:s,y:a,width:o-s,height:h-a}},i.prototype.Cell.prototype.pointIntersection=function(t,e){for(var r,i,n,s,a=this.halfedges,o=a.length;o--;){if(i=(r=a[o]).getStartpoint(),n=r.getEndpoint(),!(s=(e-i.y)*(n.x-i.x)-(t-i.x)*(n.y-i.y)))return 0;if(s>0)return-1}return 1},i.prototype.Vertex=function(t,e){this.x=t,this.y=e},i.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},i.prototype.Halfedge=function(t,e,r){if(this.site=e,this.edge=t,r)this.angle=Math.atan2(r.y-e.y,r.x-e.x);else{var i=t.va,n=t.vb;this.angle=t.lSite===e?Math.atan2(n.x-i.x,i.y-n.y):Math.atan2(i.x-n.x,n.y-i.y)}},i.prototype.createHalfedge=function(t,e,r){return new this.Halfedge(t,e,r)},i.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},i.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},i.prototype.createVertex=function(t,e){var r=this.vertexJunkyard.pop();return r?(r.x=t,r.y=e):r=new this.Vertex(t,e),this.vertices.push(r),r},i.prototype.createEdge=function(t,e,r,i){var n=this.edgeJunkyard.pop();return n?(n.lSite=t,n.rSite=e,n.va=n.vb=null):n=new this.Edge(t,e),this.edges.push(n),r&&this.setEdgeStartpoint(n,t,e,r),i&&this.setEdgeEndpoint(n,t,e,i),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(n,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(n,e,t)),n},i.prototype.createBorderEdge=function(t,e,r){var i=this.edgeJunkyard.pop();return i?(i.lSite=t,i.rSite=null):i=new this.Edge(t,null),i.va=e,i.vb=r,this.edges.push(i),i},i.prototype.setEdgeStartpoint=function(t,e,r,i){t.va||t.vb?t.lSite===r?t.vb=i:t.va=i:(t.va=i,t.lSite=e,t.rSite=r)},i.prototype.setEdgeEndpoint=function(t,e,r,i){this.setEdgeStartpoint(t,r,e,i)},i.prototype.Beachsection=function(){},i.prototype.createBeachsection=function(t){var e=this.beachsectionJunkyard.pop();return e||(e=new this.Beachsection),e.site=t,e},i.prototype.leftBreakPoint=function(t,e){var r=t.site,i=r.x,n=r.y,s=n-e;if(!s)return i;var a=t.rbPrevious;if(!a)return-1/0;var o=(r=a.site).x,h=r.y,l=h-e;if(!l)return o;var c=o-i,u=1/s-1/l,f=c/l;return u?(-f+this.sqrt(f*f-2*u*(c*c/(-2*l)-h+l/2+n-s/2)))/u+i:(i+o)/2},i.prototype.rightBreakPoint=function(t,e){var r=t.rbNext;if(r)return this.leftBreakPoint(r,e);var i=t.site;return i.y===e?i.x:1/0},i.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t),this.beachsectionJunkyard.push(t)},i.prototype.removeBeachsection=function(t){var e=t.circleEvent,r=e.x,i=e.ycenter,n=this.createVertex(r,i),s=t.rbPrevious,a=t.rbNext,o=[t],h=Math.abs;this.detachBeachsection(t);for(var l=s;l.circleEvent&&h(r-l.circleEvent.x)<1e-9&&h(i-l.circleEvent.ycenter)<1e-9;)s=l.rbPrevious,o.unshift(l),this.detachBeachsection(l),l=s;o.unshift(l),this.detachCircleEvent(l);for(var c=a;c.circleEvent&&h(r-c.circleEvent.x)<1e-9&&h(i-c.circleEvent.ycenter)<1e-9;)a=c.rbNext,o.push(c),this.detachBeachsection(c),c=a;o.push(c),this.detachCircleEvent(c);var u,f=o.length;for(u=1;u<f;u++)c=o[u],l=o[u-1],this.setEdgeStartpoint(c.edge,l.site,c.site,n);l=o[0],(c=o[f-1]).edge=this.createEdge(l.site,c.site,void 0,n),this.attachCircleEvent(l),this.attachCircleEvent(c)},i.prototype.addBeachsection=function(t){for(var e,r,i,n,s=t.x,a=t.y,o=this.beachline.root;o;)if((i=this.leftBreakPoint(o,a)-s)>1e-9)o=o.rbLeft;else{if(!((n=s-this.rightBreakPoint(o,a))>1e-9)){i>-1e-9?(e=o.rbPrevious,r=o):n>-1e-9?(e=o,r=o.rbNext):e=r=o;break}if(!o.rbRight){e=o;break}o=o.rbRight}var h=this.createBeachsection(t);if(this.beachline.rbInsertSuccessor(e,h),e||r){if(e===r)return this.detachCircleEvent(e),r=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(h,r),h.edge=r.edge=this.createEdge(e.site,h.site),this.attachCircleEvent(e),void this.attachCircleEvent(r);if(!e||r){if(e!==r){this.detachCircleEvent(e),this.detachCircleEvent(r);var l=e.site,c=l.x,u=l.y,f=t.x-c,d=t.y-u,p=r.site,b=p.x-c,g=p.y-u,y=2*(f*g-d*b),v=f*f+d*d,x=b*b+g*g,m=this.createVertex((g*v-d*x)/y+c,(f*x-b*v)/y+u);return this.setEdgeStartpoint(r.edge,l,p,m),h.edge=this.createEdge(l,t,void 0,m),r.edge=this.createEdge(t,p,void 0,m),this.attachCircleEvent(e),void this.attachCircleEvent(r)}}else h.edge=this.createEdge(e.site,h.site)}},i.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},i.prototype.attachCircleEvent=function(t){var e=t.rbPrevious,r=t.rbNext;if(e&&r){var i=e.site,n=t.site,s=r.site;if(i!==s){var a=n.x,o=n.y,h=i.x-a,l=i.y-o,c=s.x-a,u=s.y-o,f=2*(h*u-l*c);if(!(f>=-2e-12)){var d=h*h+l*l,p=c*c+u*u,b=(u*d-l*p)/f,g=(h*p-c*d)/f,y=g+o,v=this.circleEventJunkyard.pop();v||(v=new this.CircleEvent),v.arc=t,v.site=n,v.x=b+a,v.y=y+this.sqrt(b*b+g*g),v.ycenter=y,t.circleEvent=v;for(var x=null,m=this.circleEvents.root;m;)if(v.y<m.y||v.y===m.y&&v.x<=m.x){if(!m.rbLeft){x=m.rbPrevious;break}m=m.rbLeft}else{if(!m.rbRight){x=m;break}m=m.rbRight}this.circleEvents.rbInsertSuccessor(x,v),x||(this.firstCircleEvent=v)}}}},i.prototype.detachCircleEvent=function(t){var e=t.circleEvent;e&&(e.rbPrevious||(this.firstCircleEvent=e.rbNext),this.circleEvents.rbRemoveNode(e),this.circleEventJunkyard.push(e),t.circleEvent=null)},i.prototype.connectEdge=function(t,e){var r=t.vb;if(r)return!0;var i,n,s=t.va,a=e.xl,o=e.xr,h=e.yt,l=e.yb,c=t.lSite,u=t.rSite,f=c.x,d=c.y,p=u.x,b=u.y,g=(f+p)/2,y=(d+b)/2;if(this.cells[c.voronoiId].closeMe=!0,this.cells[u.voronoiId].closeMe=!0,b!==d&&(n=y-(i=(f-p)/(b-d))*g),void 0===i){if(g<a||g>=o)return!1;if(f>p){if(!s||s.y<h)s=this.createVertex(g,h);else if(s.y>=l)return!1;r=this.createVertex(g,l)}else{if(!s||s.y>l)s=this.createVertex(g,l);else if(s.y<h)return!1;r=this.createVertex(g,h)}}else if(i<-1||i>1)if(f>p){if(!s||s.y<h)s=this.createVertex((h-n)/i,h);else if(s.y>=l)return!1;r=this.createVertex((l-n)/i,l)}else{if(!s||s.y>l)s=this.createVertex((l-n)/i,l);else if(s.y<h)return!1;r=this.createVertex((h-n)/i,h)}else if(d<b){if(!s||s.x<a)s=this.createVertex(a,i*a+n);else if(s.x>=o)return!1;r=this.createVertex(o,i*o+n)}else{if(!s||s.x>o)s=this.createVertex(o,i*o+n);else if(s.x<a)return!1;r=this.createVertex(a,i*a+n)}return t.va=s,t.vb=r,!0},i.prototype.clipEdge=function(t,e){var r=t.va.x,i=t.va.y,n=0,s=1,a=t.vb.x-r,o=t.vb.y-i,h=r-e.xl;if(0===a&&h<0)return!1;var l=-h/a;if(a<0){if(l<n)return!1;l<s&&(s=l)}else if(a>0){if(l>s)return!1;l>n&&(n=l)}if(h=e.xr-r,0===a&&h<0)return!1;if(l=h/a,a<0){if(l>s)return!1;l>n&&(n=l)}else if(a>0){if(l<n)return!1;l<s&&(s=l)}if(h=i-e.yt,0===o&&h<0)return!1;if(l=-h/o,o<0){if(l<n)return!1;l<s&&(s=l)}else if(o>0){if(l>s)return!1;l>n&&(n=l)}if(h=e.yb-i,0===o&&h<0)return!1;if(l=h/o,o<0){if(l>s)return!1;l>n&&(n=l)}else if(o>0){if(l<n)return!1;l<s&&(s=l)}return n>0&&(t.va=this.createVertex(r+n*a,i+n*o)),s<1&&(t.vb=this.createVertex(r+s*a,i+s*o)),(n>0||s<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},i.prototype.clipEdges=function(t){for(var e,r=this.edges,i=r.length,n=Math.abs;i--;)e=r[i],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||n(e.va.x-e.vb.x)<1e-9&&n(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,r.splice(i,1))},i.prototype.closeCells=function(t){for(var e,r,i,n,s,a,o,h,l,c=t.xl,u=t.xr,f=t.yt,d=t.yb,p=this.cells,b=p.length,g=Math.abs;b--;)if((e=p[b]).prepareHalfedges()&&e.closeMe){for(n=(i=e.halfedges).length,r=0;r<n;){if(a=i[r].getEndpoint(),h=i[(r+1)%n].getStartpoint(),g(a.x-h.x)>=1e-9||g(a.y-h.y)>=1e-9)switch(!0){case this.equalWithEpsilon(a.x,c)&&this.lessThanWithEpsilon(a.y,d):if(l=this.equalWithEpsilon(h.x,c),o=this.createVertex(c,l?h.y:d),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;a=o;case this.equalWithEpsilon(a.y,d)&&this.lessThanWithEpsilon(a.x,u):if(l=this.equalWithEpsilon(h.y,d),o=this.createVertex(l?h.x:u,d),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;a=o;case this.equalWithEpsilon(a.x,u)&&this.greaterThanWithEpsilon(a.y,f):if(l=this.equalWithEpsilon(h.x,u),o=this.createVertex(u,l?h.y:f),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;a=o;case this.equalWithEpsilon(a.y,f)&&this.greaterThanWithEpsilon(a.x,c):if(l=this.equalWithEpsilon(h.y,f),o=this.createVertex(l?h.x:c,f),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;if(a=o,l=this.equalWithEpsilon(h.x,c),o=this.createVertex(c,l?h.y:d),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;if(a=o,l=this.equalWithEpsilon(h.y,d),o=this.createVertex(l?h.x:u,d),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;if(a=o,l=this.equalWithEpsilon(h.x,u),o=this.createVertex(u,l?h.y:f),s=this.createBorderEdge(e.site,a,o),r++,i.splice(r,0,this.createHalfedge(s,e.site,null)),n++,l)break;default:throw"Voronoi.closeCells() > this makes no sense!"}r++}e.closeMe=!1}},i.prototype.quantizeSites=function(t){for(var e,r=this.ε,i=t.length;i--;)(e=t[i]).x=Math.floor(e.x/r)*r,e.y=Math.floor(e.y/r)*r},i.prototype.recycle=function(t){if(t){if(!(t instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=t}},i.prototype.compute=function(t,e){var r=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var i=t.slice(0);i.sort(function(t,e){var r=e.y-t.y;return r||e.x-t.x});for(var n,s,a,o=i.pop(),h=0,l=this.cells;;)if(a=this.firstCircleEvent,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))o.x===n&&o.y===s||(l[h]=this.createCell(o),o.voronoiId=h++,this.addBeachsection(o),s=o.y,n=o.x),o=i.pop();else{if(!a)break;this.removeBeachsection(a.arc)}this.clipEdges(e),this.closeCells(e);var c=new Date,u=new this.Diagram;return u.cells=this.cells,u.edges=this.edges,u.vertices=this.vertices,u.execTime=c.getTime()-r.getTime(),this.reset(),u},void 0!==e&&(e.exports=i)},{}],3:[function(t,e,r){"use strict";e.exports=class{constructor(){this.branches={},this.fns=[]}add(t,e){return this.branches[e.name]={p:t,fun:e},this}run(t,e,r=10,i=!1){this.stop=r,this.it=0,this.debug=i,e&&e();let n=void 0;if(t instanceof Function)n=t;else{if(!(n=this.branches[t]))throw"Grammar error: "+n+" method not found. Did you add() it to the grammar?";n=n.fun}for(this.debug&&console.log("Starting grammar with "+n.name),this.fns.push(n);this.fns.length>0;)this.fns.shift()()}take(...t){if(this.it<this.stop){let e=random(t);if("function"==typeof e)this.it++,this.fns.push(e);else{if(!(e in this.branches))throw"Grammar error: "+e+" method not found. Did you add() it to the grammar?";this.debug&&console.log("Branching to "+this.branches[e].fun.name),this.it++,this.fns.push(this.branches[e].fun)}}else console.log("Stopped after "+this.stop+" iterations")}}},{}],4:[function(t,e,r){"use strict";let i=t("./Masonry").Masonry;e.exports=class{static grid(t,e,r,i){let n=[],s=r/t,a=i/e;for(let r=1;r<e;r++)for(let e=1;e<t;e++)n.push(createVector(e*s,r*a));return n}static spiral(t,e,r,i,n,s){let a=[],o=2*Math.PI,h=2*n*Math.PI,l=i/h,c=s/l;for(let i=0;i<t&&!(c>h);i++){let t=l*c,i=c+o,n=e+Math.cos(i)*t,h=r+Math.sin(i)*t;c+=s/t;let u=createVector(n,h);u.r=c,a.push(u)}return a}static rof3(t,e,r,i){let n=[],s=r/3,a=i/3;return n.push(createVector(s+t,a+e)),n.push(createVector(2*s+t,a+e)),n.push(createVector(2*s+t,2*a+e)),n.push(createVector(s+t,2*a+e)),n}static cols(t,e,r){let i=[];for(let n=t.x;n<r;n+=e)i.push(createVector(n,t.y));return i}static rows(t={x:0,y:0},e=10,r=100){let i=[];for(let n=t.y;n<r;n+=e)i.push(createVector(t.x,n));return i}static masonry(t,e,r,n){return new i(t,e,r,n)}}},{"./Masonry":5}],5:[function(t,e,r){"use strict";let i=t("./MasonryGrammar.js");class n{constructor(t,e,r,i){this.x=t,this.y=e,this.width=r,this.height=i}}e.exports.Masonry=class{constructor(t,e,r,i){return this.bricks=[],this.init(t,e,r,i),this.bricks}init(t,e,r,i){this.contextInfo(t,e,r),this.margin&&this.bricks.forEach(t=>{t.x+=i,t.y+=i,t.width-=i,t.width-=i})}contextInfo(t,e,r){var s=i.parse(r),a=[],o=t,h=e,l=0;for(this.bricks.push(new n(0,0,o,h)),a.push(l);s.length>0;){a.push(l);var c=this.bricks[l],u=s[0];if("|"==u.op){var f=this.bricks[l].x;this.bricks.splice(l,1);for(var d=0;d<u.values.length;d++)this.bricks.splice(l+d,0,new n(f,c.y,c.width*u.values[d],c.height)),f+=c.width*u.values[d];a.forEach(function(t,e){a[e]+=u.splits-1})}else if("-"==u.op){var p=this.bricks[l].y;for(this.bricks.splice(l,1),d=0;d<u.values.length;d++)this.bricks.splice(l+d,0,new n(c.x,p,c.width,c.height*u.values[d])),p+=c.height*u.values[d];a.forEach(function(t,e){a[e]+=u.splits-1})}else">"==u.op&&(l=a.shift());s=s.slice(1)}}}},{"./MasonryGrammar.js":6}],6:[function(t,e,r){e.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,r){var i={start:function(){var t,e;t=[],null===(e=u())&&(e=f());for(;null!==e;)t.push(e),null===(e=u())&&(e=f());return t},content:l,number:c,shortActions:u,moveForward:f};if(void 0!==r){if(void 0===i[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="start";var n=0,s=0,a=0,o=[];function h(t){n<a||(n>a&&(a=n,o=[]),o.push(t))}function l(){var t,r,i,a,o,l,u;if(l=n,u=n,91===e.charCodeAt(n)?(t="[",n++):(t=null,0===s&&h('"["')),null!==t){if(null!==(i=c()))for(r=[];null!==i;)r.push(i),i=c();else r=null;null!==r?(93===e.charCodeAt(n)?(i="]",n++):(i=null,0===s&&h('"]"')),null!==i?(44===e.charCodeAt(n)?(a=",",n++):(a=null,0===s&&h('","')),null!==(a=null!==a?a:"")&&null!==(o=null!==(o=c())?o:"")?t=[t,r,i,a,o]:(t=null,n=u)):(t=null,n=u)):(t=null,n=u)}else t=null,n=u;return null!==t&&(t=function(t,e,r){var i=e.map(function(t){return t/100});return{splits:e.length,pos:r||0,values:i}}(0,t[1],t[4])),null===t&&(n=l),null===t&&(l=n,u=n,null!==(t=c())?(44===e.charCodeAt(n)?(r=",",n++):(r=null,0===s&&h('","')),null!==(r=null!==r?r:"")&&null!==(i=null!==(i=c())?i:"")?t=[t,r,i]:(t=null,n=u)):(t=null,n=u),null!==t&&(t=function(t,e,r){for(var i=[],n=0;n<e;n++)i[n]=1/e;return{splits:e,pos:r||0,values:i}}(0,t[0],t[2])),null===t&&(n=l)),t}function c(){var t,r,i,a,o,l,c,u;if(o=n,l=n,/^[0-9]/.test(e.charAt(n))?(r=e.charAt(n),n++):(r=null,0===s&&h("[0-9]")),null!==r)for(t=[];null!==r;)t.push(r),/^[0-9]/.test(e.charAt(n))?(r=e.charAt(n),n++):(r=null,0===s&&h("[0-9]"));else t=null;if(null!==t){if(c=n,46===e.charCodeAt(n)?(r=".",n++):(r=null,0===s&&h('"."')),null!==r){if(/^[0-9]/.test(e.charAt(n))?(a=e.charAt(n),n++):(a=null,0===s&&h("[0-9]")),null!==a)for(i=[];null!==a;)i.push(a),/^[0-9]/.test(e.charAt(n))?(a=e.charAt(n),n++):(a=null,0===s&&h("[0-9]"));else i=null;null!==i?r=[r,i]:(r=null,n=c)}else r=null,n=c;null!==(r=null!==r?r:"")?(44===e.charCodeAt(n)?(i=",",n++):(i=null,0===s&&h('","')),null!==(i=null!==i?i:"")?t=[t,r,i]:(t=null,n=l)):(t=null,n=l)}else t=null,n=l;return null!==t&&(u=t[0],t=parseFloat(u.join(""),10)),null===t&&(n=o),t}function u(){var t,r,i,a,o,c,u;return i=n,a=n,124===e.charCodeAt(n)?(t="|",n++):(t=null,0===s&&h('"|"')),null===t&&(45===e.charCodeAt(n)?(t="-",n++):(t=null,0===s&&h('"-"'))),null!==t&&null!==(r=null!==(r=l())?r:"")?t=[t,r]:(t=null,n=a),null!==t&&(o=t[0],c=t[1],u={op:o,splits:2,pos:0,values:[.5,.5]},null!=c&&c&&(u.splits=c.splits,u.pos=c.pos,u.values=c.values),t=u),null===t&&(n=i),t}function f(){var t,r,i,a;return i=n,a=n,62===e.charCodeAt(n)?(t=">",n++):(t=null,0===s&&h('">"')),null!==t&&null!==(r=null!==(r=c())?r:"")?t=[t,r]:(t=null,n=a),null!==t&&(t=function(t,e){var r={op:">",pos:"1"};return null!=e&&e&&(r.pos=e),r}(0,t[1])),null===t&&(n=i),t}var d=i[r]();if(null===d||n!==e.length){var p=Math.max(n,a),b=p<e.length?e.charAt(p):null,g=function(){for(var t=1,r=1,i=!1,s=0;s<Math.max(n,a);s++){var o=e.charAt(s);"\n"===o?(i||t++,r=1,i=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,r=1,i=!0):(r++,i=!1)}return{line:t,column:r}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,r=[],i=0;i<t.length;i++)t[i]!==e&&(r.push(t[i]),e=t[i]);return r}(o),b,p,g.line,g.column)}return d},toSource:function(){return this._source},SyntaxError:function(e,r,i,n,s){this.name="SyntaxError",this.expected=e,this.found=r,this.message=function(e,r){var i;switch(e.length){case 0:i="end of input";break;case 1:i=e[0];break;default:i=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+i+" but "+(r?t(r):"end of input")+" found."}(e,r),this.offset=i,this.line=n,this.column=s}};return e.SyntaxError.prototype=Error.prototype,e}()},{}],7:[function(t,e,r){"use strict";let i=t("voronoi");e.exports=class{static voronoi(t,e,r,n){let s={xl:t.x,xr:t.x+e,yt:t.y,yb:t.y+r};return(new i).compute(n,s)}static butterflyCurve(t,e,r,i){let n=[],s=r*Math.PI;for(let r=0;r<s;r+=.025){let s=Math.exp(Math.cos(r))-2*Math.cos(i*r)-Math.pow(Math.sin(r/12),5),a=Math.sin(r)*s,o=Math.cos(r)*s;n.push(createVector(a*e+t.x,o*e+t.y))}return n}static hypocycloid(t,e,r,i,n){let s=[],a=r*Math.PI;for(let r=0;r<a;r+=.025){let a=(n-i)*Math.cos(r)+i*Math.cos((n-i)/i*r),o=(n-i)*Math.sin(r)-i*Math.sin((n-i)/i*r);s.push(createVector(a*e+t.x,o*e+t.y))}return s}static rose(t,e,r,i){let n=[],s=r*Math.PI;for(let t=0;t<s;t+=.025){let e=Math.cos(i*t)*Math.cos(t),r=Math.cos(i*t)*Math.sin(t);n.push(createVector(e,r))}return n}static rossler(t,e,r,i,n,s,a){function o(t,e,r,i,n,s){return{x:-(e+r),y:t+i*e,z:n+r*(t-s)}}let h=t.x,l=t.y,c=.1,u=.1,f=.1,d=0,p=0,b=0;for(let t=0;t<r;t++){let t=o(c,u,f,i,n,s);d=c+a*t.x,p=u+a*t.y,b=f+a*t.z,createVector(d*e+h,p*e+l,b),c=d,u=p,f=b}return[]}static lorentz(t,e,r,i,n,s,a,o,h,l){function c(t,e,r,i,n,s){return{x:i*(e-t),y:t*(n-r)-e,z:t*e-s*r}}let u=0,f=0,d=0,p=[];for(let b=0;b<r;b++){let r=c(i,n,s,a,o,h);u=i+l*r.x,f=n+l*r.y,d=s+l*r.z,p.push(createVector(u*e+t.x,f*e+t.y,d)),i=u,n=f,s=d}return p}static attractor(t,e,r){let i=[],n=[],s=.1,a=.1,o=360%r.length;for(let t=0;t<r.length;t++)i[t]=(r.charCodeAt(t)-65-12)/10;n.push({x:t.x+50*Math.cos(o),y:t.y+58*Math.sin(o),r:0});for(let r=0;r<e;r++){let e=i[0]+i[1]*s+i[2]*s*s+i[3]*s*a+i[4]*a+i[5]*a*a,r=i[6]+i[7]*s+i[8]*s*s+i[9]*s*a+i[10]*a+i[11]*a*a,o=t.x*e+t.x,h=t.y*r+t.y;n.push(createVector(Math.abs(o),Math.abs(h))),s=e,a=r}return n}static dejon(t,e,r,i,n,s=100,a=10){let o=[],h=1,l=1;for(let c=0;c<a;c++){let a=Math.sin(e*l)-Math.cos(r*h),c=Math.sin(i*h)-Math.cos(n*l);o.push(createVector(s*h+t.x+s,s*l+t.y-s)),h=a,l=c}return o}}},{voronoi:2}],8:[function(t,e,r){"use strict";let i=t("./Points");class n{constructor(t,e={}){this.style=e,this.instrs=[],this.parent=t,this.ctx=t.ctx,this.clippedBy=void 0}clone(t={}){let e=JSON.parse(JSON.stringify(this.style));Object.keys(t).forEach(r=>e[r]=t[r]);let r=new n(this.parent,e);return delete r.style.hide,r.instrs=JSON.parse(JSON.stringify(this.instrs)),r}m(t,e){let r="object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.instrs.push({instr:"m",p:r}),this}l(t,e){let r="object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.instrs.push({instr:"l",p:r}),this}bezier(t,e,r){return this.instrs.push({instr:"b",c1:{x:t.x,y:t.y,z:t.z},c2:{x:e.x,y:e.y,z:e.z},p2:{x:r.x,y:r.y,z:r.z}}),this}bc(t){let e=this.instrs[this.instrs.length-1];if("b"!==e.instr)throw"Previous instruction to bc() must be bezier()";return this.bezier(Object.assign({},e.c1),Object.assign({},e.c2),t),this}arc(t,e,r){return this.instrs.push({instr:"a",p1:{x:t.x,y:t.y,z:t.z},p2:{x:e.x,y:e.y,z:e.z},r:r}),this}quad(t,e){return this.instrs.push({instr:"q",c:{x:t.x,y:t.y,z:t.z},p:{x:e.x,y:e.y,z:e.z}}),this}center(){let t=0,e=createVector(0,0);return this.instrs.forEach(r=>{Object.keys(r).filter(t=>"instr"!==t).forEach(t=>{e.add(r[t].x,r[t].y)}),t+=Object.keys(r).length-1}),t&&e.div(t),e}shadow(t=0,e="black",r=1,i=5,n=5){return this.ctx.shadowBlur=t,this.ctx.shadowColor=e,this.ctx.shadowOffsetX=i,this.ctx.shadowOffsetY=n,this.ctx.shadowAlpha=r,this}moveTo(t,e){let r="object"==typeof t?t:{x:t,y:e},i=this.center(),n=r.x-i.x,s=r.y-i.y;return this.instrs.forEach(t=>{Object.keys(t).forEach(e=>{"instr"!==e&&(t[e].x+=n,t[e].y+=s)})}),this}rotate(t,e){return e=e||this.center(),this.instrs.forEach(r=>{Object.keys(r).forEach(n=>{"instr"!==n&&(r[n]=i.rotatePoint(r[n],t,e))})}),this}draw(t=1){if(this.ctx.save(),this.clippedBy){let t=new Path2D;t.rect(this.clippedBy.x,this.clippedBy.y,this.clippedBy.w,this.clippedBy.h),this.ctx.clip(t)}return this.style.filter&&(this.ctx.filter=this.style.filter),this.ctx.beginPath(),this.instrs.forEach(e=>{switch(e.instr){case"m":this.ctx.moveTo(e.p.x*t,e.p.y*t);break;case"l":this.ctx.lineTo(e.p.x*t,e.p.y*t);break;case"b":this.ctx.bezierCurveTo(e.c1.x*t,e.c1.y*t,e.c2.x*t,e.c2.y*t,e.p2.x*t,e.p2.y*t);break;case"a":this.ctx.arcTo(e.p1.x*t,e.p1.y*t,e.p2.x*t,e.p2.y*t,e.r);break;case"q":this.ctx.quadraticCurveTo(e.c.x*t,e.c.y*t,e.p.x*t,e.p.y*t);break;case"arc":this.ctx.arc(e.p.x*t,e.p.y*t,e.r,e.sa,e.ea,e.cw)}}),this._applyStyle(),this}_applyStyle(){this.style.fill?(this.ctx.globalAlpha="alpha"in this.style?this.style.alpha:1,this.ctx.fillStyle=this.style.fill,this.ctx.fill()):this.ctx.noFill,this.ctx.globalAlpha=this.style.strokeAlpha||this.style.alpha||1,(this.style.strokeWidth||this.style.stroke)&&(this.ctx.strokeStyle=this.style.stroke||"black",this.ctx.lineWidth=this.style.strokeWidth||1,this.ctx.stroke()),this.style.shadow&&(this.ctx.shadowColor=this.style.shadow,this.ctx.shadowOffsetX=10,this.ctx.shadowOffsetY=10),this.ctx.lineCap=this.style.lineCap||"butt",this.ctx.restore(),this.ctx.setTransform(1,0,0,1,0,0)}fromPoints(t,e,r=10,i=0){let n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s),o={x:t.x-i,y:t.y-r/2},h={x:t.x+a+i,y:t.y-r/2},l={x:t.x+a+i,y:t.y+r/2},c={x:t.x-i,y:t.y+r/2};this.m(o).l(h).l(l).l(c).l(o);let u=e.x-t.x,f=e.y-t.y,d=Math.atan2(f,u)*(180/Math.PI);return this.rotate(d,t),this}circle(t,e=10,r=0,i=2*Math.PI,n=!0){return this.instrs.push({instr:"arc",p:t,r:e,sa:r,ea:i,cw:n}),this}rect(t,e,r){return this.fromPoints({x:t.x,y:t.y+r/2},{x:t.x+e,y:t.y+r/2},r)}line(t,e){return this.m(t).l(e),this}clip(t,e,r,i){return this.clippedBy={x:t,y:e,w:r,h:i},this}}e.exports=n},{"./Points":9}],9:[function(t,e,r){"use strict";e.exports=class{static subd(t,e=1){let r=[];for(let e=1;e<t.length;e++)r.push(t[e-1],{x:(t[e-1].x+t[e].x)/2,y:(t[e-1].y+t[e].y)/2});return r.push(t[t.length-1]),r}static rects(t,e){for(let e=0;e<t.length;e++)Math.sqrt(t[e].x*t[e].x+t[e].y*t[e].y)}static rslice(t,e,r){let i=r-e,n=Math.round(random()*t.length)-i,s=n+Math.round(i*random());return console.log(s-n),t.slice(n,s)}static noise(t,e){return t.map(function(t){return{x:t.x+random()*e,y:t.y+random()*e}})}static closest(t,e){let r=void 0,i=1e10;return e.filter(e=>e.x!==t.x&&e.y!==t.y).forEach(e=>{let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));n<i&&(i=n,r=e)}),r}static rotatePoint(t,e,r){let i=e*Math.PI/180,n=Math.cos(i),s=Math.sin(i),a=t.x-r.x,o=t.y-r.y;return{x:n*a-s*o+r.x,y:s*a+n*o+r.y}}}},{}],10:[function(t,e,r){(function(r){let i=t("./Layout"),n=t("./Path"),s=t("./Parametrics"),a=t("./Grammar"),o=t("./Points"),h=t("./particles/ParticleSystem"),l=t("chroma-js");function c(t){console.log("Chalks:",t)}r.chroma=l;p5.Vector.prototype.cadd=function(t,e,r){let i="function"==typeof t?t():t,n="function"==typeof e?e():e,s="function"==typeof r?r():r;return createVector(this.x,this.y,this.z).add(i,n,s)},p5.prototype.r=function(t,e,r){return random(t,e,r)},p5.prototype.vector=function(t,e,r){return createVector(t,e,r)},e.exports=class{constructor(t={},e={}){this.start=Date.now(),this.scale=t.scale||1,t.width&&t.height?(this.width=t.width*this.scale,this.height=t.height*this.scale,this.p5canvas=createCanvas(this.width,this.height),c(`creating canvas ${this.width}x${this.height}`)):(this.width=t.width*this.scale||p5.instance.canvas.width,this.height=t.height*this.scale||p5.instance.canvas.height,this.p5canvas=p5.instance.canvas,c(`reusing existing canvas ${this.width}x${this.height}`)),this.canvas=document.getElementById("defaultCanvas0"),this.ctx=this.canvas.getContext("2d"),this.seed=t.seed?t.seed:(1e4*Math.random()).toString().substr(5,8),c("using seed="+this.seed),randomSeed(this.seed),this.drawBackground(this.width,this.height,e),this._modules()}_modules(){this.Layout=i,this.Path=n,this.Parametrics=s,this.Grammar=a,this.Points=o,this.Particles=h}drawBackground(t,e,r){this.ctx.fillStyle=r.fill||"white",this.ctx.fillRect(0,0,t,e),this.ctx.fillStyle="black"}setStyle(t){this.drawBackground(this.width,this.height,t)}path(t){return new n(this,t)}lgrad(t,e,r){let i=this.ctx.createLinearGradient(t.x,t.y,e.x,e.y);return r.forEach(t=>i.addColorStop(t[0],t[1])),i}rgrad(t,e,r,i,n){let s=this.ctx.createRadialGradient(t.x,t.y,e,r.x,r.y,i);return n.forEach(t=>s.addColorStop(t[0],t[1])),s}draw(t){this.ctx.imageSmoothingQuality="high",this.ctx.save(),this.clipped&&this.ctx.clip(this.clipped),c("ended ("+(Date.now()-this.start)/1e3+" secs)"),t&&saveCanvas(this.p5canvas,t,"png"),this.ctx.restore(),noLoop()}clipTo(t,e,r,i){let n=new Path2D;n.rect(t,e,r,i),this.clipped=n}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Grammar":3,"./Layout":4,"./Parametrics":7,"./Path":8,"./Points":9,"./particles/ParticleSystem":14,"chroma-js":1}],11:[function(t,e,r){"use strict";let i=t("./Point.js").Point,n=t("./Particle.js").Particle,s=t("./Random.js").Random;e.exports.Emitter=class{constructor(t,e,r,i,n,a,o){this.position=t,this.velocity=e,this.xsize=r,this.ysize=i,this.particleLife=n||-1,this.spread=void 0===a?Math.PI/32:a,this.emissionRate=o||1,this.jitter=.05,this.rand=new s}setPos(t){return this.position=t,this}setSpeed(t){return this.velocity=t,this}setSize(t){return this.xsize=t.x,this.ysize=t.y,this}setJitter(t){return this.jitter=t,this}setSpread(t){return this.spread=t,this}setLifetime(t){return this.particleLife=t,this}seed(t){return void 0!==t&&this.rand.setSeed(t),this}addParticle(){var t=this.position.copy();t.x+=this.rand.random()*this.xsize,t.y+=this.rand.random()*this.ysize;var e=new n(t,i.fromAngle(this.velocity.getAngle()-this.spread*this.rand.random()-0*this.spread*2,this.velocity.getMagnitude()));return e.ttl=this.particleLife,e}}},{"./Particle.js":13,"./Point.js":15,"./Random.js":16}],12:[function(t,e,r){"use strict";let i=t("./Point.js").Point;e.exports.Field=class{constructor(t,e,r){this.position=t||new i(0,0),this.mass=e||100,this.decayVal=r||0}decay(){this.mass=this.mass-this.decayVal}}},{"./Point.js":15}],13:[function(t,e,r){"use strict";let i=t("./Point.js").Point;e.exports.Particle=class{constructor(t,e){this.position=t||new i(0,0),this.velocity=e||new i(0,0),this.initialVelocity=this.velocity.copy(),this.acceleration=new i(0,0),this.ttl=-1,this.lived=0,this.traceRecord=[],this.traceRecord.push(this.position.copy())}submitToFields(t){var e=this,r=0,n=0;t.forEach(function(t){var i=t.position.x-e.position.x,s=t.position.y-e.position.y,a=Math.pow(i*i+s*s,.5),o=t.mass/Math.pow(a,2);r+=i*o,n+=s*o}),this.acceleration=new i(r,n)}move(){this.velocity.x+=this.acceleration.x,this.velocity.y+=this.acceleration.y,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.traceRecord.push(this.position.copy())}getPos(){return this.position}getTrace(){return this.traceRecord}}},{"./Point.js":15}],14:[function(t,e,r){"use strict";let i=t("./Point.js").Point,n=t("./Field.js").Field,s=t("./Emitter.js").Emitter,a=t("./Particle.js").Particle,o=t("./Random.js").Random;e.exports.ParticleSystem=class{constructor(t){this.maxParticles=2e3,this.particles=[],this.emitters=[],this.fields=[],this.elapsed=0,this.gen=!1,this.baseOrigin=new i(0,0),this.rand=new o;var e=this;return void 0!==t&&t.forEach(function(t){e.particles.push(new a(t))}),this}setOrigin(t){return this.baseOrigin=t,this}seed(t){return void 0!==t&&this.rand.setSeed(t),this}addEmitter(t,e,r,i,n,a,o){return this.emitters.push(new s(t,e,r,i,n,a,o).seed(this.rand.random())),this}addField(t,e,r){return this.fields.push(new n(t,e,r)),this}setMaxParticles(t){return this.maxParticles=t,this}bounded(t,e){return this.maxHeight=e,this.maxWidth=t,this}clean(){if(void 0===this.maxHeight||void 0==this.maxWidth)return this;var t=this;this.particles.forEach(function(e,r){var i=[];e.getTrace().forEach(function(e,r){e.x<=t.baseOrigin.x+t.maxWidth&&e.y<=t.maxHeight+t.baseOrigin.y&&i.push(e)}),e.traceRecord=i});for(var e=this.particles.length;e--;)this.particles[e].getTrace().length||this.particles.splice(e,1);return this}addNewParticles(){var t=this;return this.emitters.forEach(function(e){for(var r=0;r<e.emissionRate;r++)t.particles.push(e.addParticle())}),this}getParticles(){return this.particles}getParticleCount(){return this.particles.length}getEmitterCount(){return this.emitters.length}getFieldCount(){return this.fields.length}getParticles(){return this.particles}evolve(t){for(var e=this.fields,r=0;r<t;r++)this.particles.length<this.maxParticles&&this.addNewParticles(),this.particles.forEach(function(t){t.submitToFields(e),t.move()}),e.forEach(t=>t.decay());return this.clean()}},e.exports.Point=i,e.exports.Field=n,e.exports.Emitter=s,e.exports.Particle=a},{"./Emitter.js":11,"./Field.js":12,"./Particle.js":13,"./Point.js":15,"./Random.js":16}],15:[function(t,e,r){"use strict";class i{constructor(t,e){this.x=t||0,this.y=e||0}getMagnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}unit(){var t=this.getMagnitude();return new i(this.x/t,this.y/t)}pow(){return Math.pow(this.x,2)+Math.pow(this.y,2)}multiply(t){return"object"==typeof t?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t),this}add(t){return"object"==typeof t?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t),this}limit(t){if(this.getMagnitude()>t){var e=this.unit();return new i(e.x*t,e.y*t)}return this.copy()}dec(t){return"object"==typeof t?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=t),this}div(t){return new i(this.x/t,this.y/t)}vectorTo(t){return new i(t.x-this.x,t.y-this.y)}withinBounds(t,e){var r=1+~~(e/2);return this.x>=t.x-r&&this.x<=t.x+r&&this.y>=t.y-r&&this.y<=t.y+r}getAngle(){var t=0,e=0;return this.x>0?this.y>0?(e=0,t=this.y/this.x):(e=3*Math.PI/2,t=this.x/this.y):this.y>0?(e=Math.PI/2,t=this.x/this.y):(e=Math.PI,t=this.y/this.x),Math.atan(Math.abs(t))+e}getAngleDegrees(){return 180*this.getAngle()/Math.PI}jitter(t,e){return randFunc=e?e.random:Math.random,new i(this.x+this.x*t*randFunc(),this.y+this.y*t*randFunc())}copy(){return new i(this.x,this.y)}static euc2d(t,e){let r=Math.pow(t.x-e.x),i=Math.pow(t.y-e.y);return Math.sqrt(r+i)}static fromAngle(t,e){return new i(e*Math.cos(t),e*Math.sin(t))}}e.exports.Point=i},{}],16:[function(t,e,r){"use strict";const i=Math.E,n=Math.PI,s=n/2;e.exports.Random=class{constructor(t){if("string"==typeof t){var e=t.length;for(this.seed=0;e--;)this.seed+=t.charCodeAt(e)}else this.seed=void 0!==t?t:Math.random()}setSeed(t){t&&(this.seed=t)}random(t,e){var r=1e4*Math.sin(this.seed++);return void 0===e?void 0===t?r-Math.floor(r):(r-Math.floor(r))*t:t+(r-Math.floor(r))*(e-t)}rint(t,e){return Math.round(this.random(t,e))}arcsine(t,e){var r=Math.sin(s*this.uniform(0,1));return t+(e-t)*r*r}beta(t,e,r,i){if(t<e)return i-(i-r)*this.beta(e,t,0,1);var n=this.gamma(0,1,t);return r+(i-r)*n/(n+this.gamma(0,1,e))}cauchy(t,e){return t+e*Math.tan(n*this.uniform(-.5,.5))}chiSquare(t){return this.gamma(0,2,.5*t)}cosine(t,e){return.5*(t+e)+(e-t)/n*Math.asin(this.uniform(-1,1))}doubleLog(t,e){var r=.5*(t+e),i=.5*(e-t);return 0===this.bernoulli(.5)&&(i=-i),r+i*this.uniform(0,1)*this.uniform(0,1)}erlang(t,e){var r=1,i=1;for(i=1;i<e;i++)r*=this.uniform(0,1);return-t*Math.log(r)}exponential(t,e){return t-e*Math.log(this.uniform(0,1))}extremeValue(t,e){return t+e*Math.log(-Math.log(this.uniform(0,1)))}fRatio(t,e){return this.chiSquare(t)/t/(this.chiSquare(e)/e)}gamma(t,e,r){var n=1/Math.sqrt(2*r-1),s=r-Math.log(4),a=r+1/n,o=1+Math.log(4.5),h=1+r/i;if(r<1)for(;;){var l=h*this.uniform(0,1);if(l>1){var c=-Math.log((h-l)/r);if(this.uniform(0,1)<=Math.pow(c,r-1))return t+e*c}else if(c=Math.pow(l,1/r),this.uniform(0,1)<=Math.exp(-c))return t+e*c}else{if(1==r)return this.exponential(t,e);for(;;){var u=this.uniform(0,1),f=this.uniform(0,1),d=n*Math.log(u/(1-u)),p=u*u*f,b=s+a*d-(c=r*Math.exp(d));if(b+o-4.5*p>0||b>=Math.log(p))return t+e*c}}}laplace(t,e){return 1==this.bernoulli(.5)?t+e*Math.log(this.uniform(0,1)):t-e*Math.log(this.uniform(0,1))}logarithmic(t,e){return t+(e-t)*this.uniform(0,1)*this.uniform(0,1)}logistic(t,e){return t-e*Math.log(1/this.uniform(0,1)-1)}lognormal(t,e,r){return t+Math.exp(this.normal(e,r))}normal(t,e){var r,i,n;do{r=(i=this.uniform(-1,1))*i+(n=this.uniform(-1,1))*n}while(r>=1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}parabolic(t,e){var r=function(t,e,r){if(t<e||t>r)return 0;var i=.5*(e+r),n=.5*(r-e);return 3/(4*n)*(1-(t-i)*(t-i)/(n*n))},i=r(.5*(t+e),t+e);return this.userSpecified(r,t,e,0,i)}pareto(t){return Math.pow(this.uniform(0,1),-1/t)}pearson5(t,e){return 1/this.gamma(0,1/t,e)}pearson6(t,e,r){return this.gamma(0,t,e)/this.gamma(0,t,r)}power(t){return Math.pow(this.uniform(0,1),1/t)}rayleigh(t,e){return t+e*Math.sqrt(-Math.log(this.uniform(0,1)))}studentT(t){return this.normal(0,1)/Math.sqrt(this.chiSquare(t)/t)}triangular(t,e,r){var i=this.uniform(0,1),n=1-i;return i<=(r-t)/(e-t)?t+Math.sqrt((e-t)*(r-t)*i):e-Math.sqrt((e-t)*(e-r)*n)}uniform(t,e){return t+(e-t)*(void 0!==this.seed?this.random():Math.random())}userSpecified(t,e,r,i,n){var s,a,o=(r-e)*(n-i);do{s=this.uniform(0,o)/(n-i)+e,a=this.uniform(i,n)}while(a>t(s,e,r));return s}weibull(t,e,r){return t+e*Math.pow(-Math.log(this.uniform(0,1)),1/r)}bernoulli(t){return this.uniform(0,1)<t?0:1}binomial(t,e){for(var r=0,i=0;i<t;i++)r+=this.bernoulli(e);return r}geometric(t){return Math.floor(Math.log(this.uniform(0,1))/Math.log(1-t))}hypergeometric(t,e,r){for(var i=0,n=0;n<t;n++,e--){var s=r/e;this.bernoulli(s)&&(i++,r--)}return i}negativeBinomial(t,e){for(var r=0,i=0;i<t;i++)r+=this.geometric(e);return r}pascal(t,e){return this.negativeBinomial(t,e)+t}poisson(t){for(var e=1,r=0;e>=Math.exp(-t);r++)e*=this.uniform(0,1);return r-1}uniformDiscrete(t,e){return t+Math.floor((e-t+1)*this.uniform(0,1))}}},{}]},{},[10])(10)});
