!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chalks=t()}}(function(){return function(){return function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};e[a][0].call(f.exports,function(t){return i(e[a][1][t]||t)},f,f.exports,t,e,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}}()({1:[function(t,e,r){(function(){var t,n,i,s,a,o,l,c,f,u,h,d,b,p,g,y,v,x,m,w,k,R,E,M,P,N,L,S,B,C,_,V,A,q,O,j,I,z,T,J,G,W,F,D,H,Y,X,U,$,K,Z,Q,tt,et,rt,nt,it,st,at,ot,lt,ct,ft,ut,ht,dt,bt,pt,gt,yt,vt,xt,mt,wt,kt,Rt,Et,Mt,Pt,Nt,Lt=[].slice;Rt=function(){var t,e,r,n,i;for(t={},n=0,e=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<e;n++)r=i[n],t["[object "+r+"]"]=r.toLowerCase();return function(e){var r;return r=Object.prototype.toString.call(e),t[r]||"object"}}(),X=function(t,e,r){return null==e&&(e=0),null==r&&(r=1),t<e&&(t=e),t>r&&(t=r),t},Et=function(t){return t.length>=3?Array.prototype.slice.call(t):t[0]},k=function(t){var e,r;for(t._clipped=!1,t._unclipped=t.slice(0),e=r=0;r<3;e=++r)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]<0&&(t[e]=0),t[e]>255&&(t[e]=255)):3===e&&(t[e]<0&&(t[e]=0),t[e]>1&&(t[e]=1));return t._clipped||delete t._unclipped,t},s=Math.PI,vt=Math.round,E=Math.cos,S=Math.floor,rt=Math.pow,U=Math.log,mt=Math.sin,wt=Math.sqrt,p=Math.atan2,Z=Math.max,b=Math.abs,l=2*s,a=s/3,n=s/180,o=180/s,(w=function(){return arguments[0]instanceof t?arguments[0]:function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,arguments,function(){})}).default=w,d=[],void 0!==e&&null!==e&&null!=e.exports&&(e.exports=w),(void 0!==r&&null!==r?r:this).chroma=w,w.version="1.4.1",h={},f=[],u=!1,t=function(){function t(){var t,e,r,n,i,s,a,o,l;for(s=this,e=[],o=0,n=arguments.length;o<n;o++)null!=(t=arguments[o])&&e.push(t);if(e.length>1&&(a=e[e.length-1]),null!=h[a])s._rgb=k(h[a](Et(e.slice(0,-1))));else{for(u||(f=f.sort(function(t,e){return e.p-t.p}),u=!0),l=0,i=f.length;l<i&&!(a=(r=f[l]).test.apply(r,e));l++);a&&(s._rgb=k(h[a].apply(h,e)))}null==s._rgb&&console.warn("unknown format: "+e),null==s._rgb&&(s._rgb=[0,0,0]),3===s._rgb.length&&s._rgb.push(1)}return t.prototype.toString=function(){return this.hex()},t}(),w._input=h,w.brewer=x={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var t,e;for(t in e=[],x)e.push(x[t.toLowerCase()]=x[t])}(),w.colors=Mt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},W=function(){var t,e,r,n,s,a,o;return n=(e=Et(arguments))[0],t=e[1],r=e[2],a=(n+16)/116,s=isNaN(t)?a:a+t/500,o=isNaN(r)?a:a-r/200,a=i.Yn*F(a),s=i.Xn*F(s),o=i.Zn*F(o),[Nt(3.2404542*s-1.5371385*a-.4985314*o),Nt(-.969266*s+1.8760108*a+.041556*o),r=Nt(.0556434*s-.2040259*a+1.0572252*o),e.length>3?e[3]:1]},Nt=function(t){return 255*(t<=.00304?12.92*t:1.055*rt(t,1/2.4)-.055)},F=function(t){return t>i.t1?t*t*t:i.t2*(t-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ft=function(){var t,e,r,n,i,s,a;return r=(n=Et(arguments))[0],e=n[1],t=n[2],s=(i=pt(r,e,t))[0],[116*(a=i[1])-16,500*(s-a),200*(a-i[2])]},gt=function(t){return(t/=255)<=.04045?t/12.92:rt((t+.055)/1.055,2.4)},Pt=function(t){return t>i.t3?rt(t,1/3):t/i.t2+i.t0},pt=function(){var t,e,r,n;return r=(n=Et(arguments))[0],e=n[1],t=n[2],r=gt(r),e=gt(e),t=gt(t),[Pt((.4124564*r+.3575761*e+.1804375*t)/i.Xn),Pt((.2126729*r+.7151522*e+.072175*t)/i.Yn),Pt((.0193339*r+.119192*e+.9503041*t)/i.Zn)]},w.lab=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["lab"]),function(){})},h.lab=W,t.prototype.lab=function(){return ft(this._rgb)},g=function(t){var e,r,n,i,s,a,o,l,c,f,u;return 2===(t=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(w(i));return n}()).length?(c=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),s=c[0],a=c[1],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push(s[e]+t*(a[e]-s[e]));return n}(),w.lab.apply(w,r)}):3===t.length?(f=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),s=f[0],a=f[1],o=f[2],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*s[e]+2*(1-t)*t*a[e]+t*t*o[e]);return n}(),w.lab.apply(w,r)}):4===t.length?(u=function(){var e,r,n;for(n=[],r=0,e=t.length;r<e;r++)i=t[r],n.push(i.lab());return n}(),s=u[0],a=u[1],o=u[2],l=u[3],e=function(t){var e,r;return r=function(){var r,n;for(n=[],e=r=0;r<=2;e=++r)n.push((1-t)*(1-t)*(1-t)*s[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*o[e]+t*t*t*l[e]);return n}(),w.lab.apply(w,r)}):5===t.length&&(r=g(t.slice(0,3)),n=g(t.slice(2,5)),e=function(t){return t<.5?r(2*t):n(2*(t-.5))}),e},w.bezier=function(t){var e;return(e=g(t)).scale=function(){return w.scale(e)},e},w.cubehelix=function(t,e,r,n,i){var s,a,o;return null==t&&(t=300),null==e&&(e=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),s=0,"array"===Rt(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(o=function(o){var c,f,u,h,d;return c=l*((t+120)/360+e*o),h=rt(i[0]+a*o,n),f=(0!==s?r[0]+o*s:r)*h*(1-h)/2,u=E(c),d=mt(c),w(k([255*(h+f*(-.14861*u+1.78277*d)),255*(h+f*(-.29227*u-.90649*d)),255*(h+f*(1.97294*u)),1]))}).start=function(e){return null==e?t:(t=e,o)},o.rotations=function(t){return null==t?e:(e=t,o)},o.gamma=function(t){return null==t?n:(n=t,o)},o.hue=function(t){return null==t?r:("array"===Rt(r=t)?0===(s=r[1]-r[0])&&(r=r[1]):s=0,o)},o.lightness=function(t){return null==t?i:("array"===Rt(t)?(i=t,a=t[1]-t[0]):(i=[t,t],a=0),o)},o.scale=function(){return w.scale(o)},o.hue(r),o},w.random=function(){var e,r;for("0123456789abcdef",e="#",r=0;r<6;++r)e+="0123456789abcdef".charAt(S(16*Math.random()));return new t(e)},d=[],w.interpolate=O=function(t,e,r,n){var i,s,a,o;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==Rt(t)&&(t=w(t)),"object"!==Rt(e)&&(e=w(e)),a=0,s=d.length;a<s;a++)if(n===(i=d[a])[0]){o=i[1](t,e,r,n);break}if(null==o)throw"color mode "+n+" is not supported";return o.alpha(t.alpha()+r*(e.alpha()-t.alpha()))},t.prototype.interpolate=function(t,e,r){return O(this,t,e,r)},w.mix=O,t.prototype.mix=t.prototype.interpolate,h.rgb=function(){var t,e,r,n;for(t in r=[],e=Et(arguments))n=e[t],r.push(n);return r},w.rgb=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(t){return null==t&&(t=!0),t?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},t.prototype.rgba=function(t){return null==t&&(t=!0),t?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},f.push({p:3,test:function(t){var e;return e=Et(arguments),"array"===Rt(e)&&3===e.length?"rgb":4===e.length&&"number"===Rt(e[3])&&e[3]>=0&&e[3]<=1?"rgb":void 0}}),h.lrgb=h.rgb,z=function(e,r,n,i){var s,a;return s=e._rgb,a=r._rgb,new t(wt(rt(s[0],2)*(1-n)+rt(a[0],2)*n),wt(rt(s[1],2)*(1-n)+rt(a[1],2)*n),wt(rt(s[2],2)*(1-n)+rt(a[2],2)*n),i)},c=function(e){var r,n,i,s,a;for(r=1/e.length,a=[0,0,0,0],i=0,n=e.length;i<n;i++)s=e[i]._rgb,a[0]+=rt(s[0],2)*r,a[1]+=rt(s[1],2)*r,a[2]+=rt(s[2],2)*r,a[3]+=s[3]*r;return a[0]=wt(a[0]),a[1]=wt(a[1]),a[2]=wt(a[2]),a[3]>1&&(a[3]=1),new t(k(a))},d.push(["lrgb",z]),w.average=function(t,e){var r,n,i,a,o,l,f,u,h,d,b,g,y;if(null==e&&(e="rgb"),h=t.length,f=(t=t.map(function(t){return w(t)})).splice(0,1)[0],"lrgb"===e)return c(t);for(u in a=[],o=0,l=0,g=f.get(e))g[u]=g[u]||0,a.push(isNaN(g[u])?0:1),"h"!==e.charAt(u)||isNaN(g[u])||(r=g[u]/180*s,o+=E(r),l+=mt(r));for(n=f.alpha(),b=0,d=t.length;b<d;b++)for(u in y=(i=t[b]).get(e),n+=i.alpha(),g)isNaN(y[u])||(a[u]+=1,"h"===e.charAt(u)?(r=y[u]/180*s,o+=E(r),l+=mt(r)):g[u]+=y[u]);for(u in g)if("h"===e.charAt(u)){for(r=p(l/a[u],o/a[u])/s*180;r<0;)r+=360;for(;r>=360;)r-=360;g[u]=r}else g[u]=g[u]/a[u];return w(g,e).alpha(n/h)},C=function(t){var e,r;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[(r=parseInt(t,16))>>16,r>>8&255,255&r,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),[(r=parseInt(t,16))>>24&255,r>>16&255,r>>8&255,vt((255&r)/255*100)/100];if(null!=h.css&&(e=h.css(t)))return e;throw"unknown color: "+t},at=function(t,e){var r,n,i,s,a,o;return null==e&&(e="auto"),a=t[0],i=t[1],n=t[2],r=t[3],"auto"===e&&(e=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),o=(o="000000"+(a<<16|i<<8|n).toString(16)).substr(o.length-6),s=(s="0"+vt(255*r).toString(16)).substr(s.length-2),"#"+function(){switch(e.toLowerCase()){case"rgba":return o+s;case"argb":return s+o;default:return o}}()},h.hex=function(t){return C(t)},w.hex=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="auto"),at(this._rgb,t)},f.push({p:4,test:function(t){if(1===arguments.length&&"string"===Rt(t))return"hex"}}),A=function(){var t,e,r,n,i,s,a,o,l,c,f,u,h,d;if(i=(t=Et(arguments))[0],f=t[1],a=t[2],0===f)l=n=e=255*a;else{for(d=[0,0,0],r=[0,0,0],u=2*a-(h=a<.5?a*(1+f):a+f-a*f),i/=360,d[0]=i+1/3,d[1]=i,d[2]=i-1/3,s=o=0;o<=2;s=++o)d[s]<0&&(d[s]+=1),d[s]>1&&(d[s]-=1),6*d[s]<1?r[s]=u+6*(h-u)*d[s]:2*d[s]<1?r[s]=h:3*d[s]<2?r[s]=u+(h-u)*(2/3-d[s])*6:r[s]=u;l=(c=[vt(255*r[0]),vt(255*r[1]),vt(255*r[2])])[0],n=c[1],e=c[2]}return t.length>3?[l,n,e,t[3]]:[l,n,e]},lt=function(t,e,r){var n,i,s,a,o;return void 0!==t&&t.length>=3&&(t=(a=t)[0],e=a[1],r=a[2]),t/=255,e/=255,r/=255,s=Math.min(t,e,r),i=((Z=Math.max(t,e,r))+s)/2,Z===s?(o=0,n=Number.NaN):o=i<.5?(Z-s)/(Z+s):(Z-s)/(2-Z-s),t===Z?n=(e-r)/(Z-s):e===Z?n=2+(r-t)/(Z-s):r===Z&&(n=4+(t-e)/(Z-s)),(n*=60)<0&&(n+=360),[n,o,i]},w.hsl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["hsl"]),function(){})},h.hsl=A,t.prototype.hsl=function(){return lt(this._rgb)},q=function(){var t,e,r,n,i,s,a,o,l,c,f,u,h,d,b,p,g,y;if(i=(t=Et(arguments))[0],p=t[1],y=t[2],y*=255,0===p)l=n=e=y;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=y*(1-p),o=y*(1-p*(r=(i/=60)-(s=S(i)))),g=y*(1-p*(1-r)),s){case 0:l=(c=[y,g,a])[0],n=c[1],e=c[2];break;case 1:l=(f=[o,y,a])[0],n=f[1],e=f[2];break;case 2:l=(u=[a,y,g])[0],n=u[1],e=u[2];break;case 3:l=(h=[a,o,y])[0],n=h[1],e=h[2];break;case 4:l=(d=[g,a,y])[0],n=d[1],e=d[2];break;case 5:l=(b=[y,a,o])[0],n=b[1],e=b[2]}return[l,n,e,t.length>3?t[3]:1]},ct=function(){var t,e,r,n,i,s,a,o,l;return s=(a=Et(arguments))[0],r=a[1],t=a[2],i=Math.min(s,r,t),e=(Z=Math.max(s,r,t))-i,l=Z/255,0===Z?(n=Number.NaN,o=0):(o=e/Z,s===Z&&(n=(r-t)/e),r===Z&&(n=2+(t-s)/e),t===Z&&(n=4+(s-r)/e),(n*=60)<0&&(n+=360)),[n,o,l]},w.hsv=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["hsv"]),function(){})},h.hsv=q,t.prototype.hsv=function(){return ct(this._rgb)},tt=function(t){return"number"===Rt(t)&&t>=0&&t<=16777215?[t>>16,t>>8&255,255&t,1]:(console.warn("unknown num color: "+t),[0,0,0,1])},dt=function(){var t;return((t=Et(arguments))[0]<<16)+(t[1]<<8)+t[2]},w.num=function(e){return new t(e,"num")},t.prototype.num=function(t){return null==t&&(t="rgb"),dt(this._rgb,t)},h.num=tt,f.push({p:1,test:function(t){if(1===arguments.length&&"number"===Rt(t)&&t>=0&&t<=16777215)return"num"}}),B=function(){var t,e,r,n,i,s,a,o,l,c,f,u,h,d,b,p,g,y,v,x;if(o=(r=Et(arguments))[0],i=r[1],e=r[2],a=a/100*255,t=255*(i/=100),0===i)u=a=n=e;else switch(360===o&&(o=0),o>360&&(o-=360),o<0&&(o+=360),f=(c=e*(1-i))+t*(1-(s=(o/=60)-(l=S(o)))),v=c+t*s,x=c+t,l){case 0:u=(h=[x,v,c])[0],a=h[1],n=h[2];break;case 1:u=(d=[f,x,c])[0],a=d[1],n=d[2];break;case 2:u=(b=[c,x,v])[0],a=b[1],n=b[2];break;case 3:u=(p=[c,f,x])[0],a=p[1],n=p[2];break;case 4:u=(g=[v,c,x])[0],a=g[1],n=g[2];break;case 5:u=(y=[x,c,f])[0],a=y[1],n=y[2]}return[u,a,n,r.length>3?r[3]:1]},st=function(){var t,e,r,n,i,s,a,o,l;return o=(l=Et(arguments))[0],i=l[1],e=l[2],a=Math.min(o,i,e),r=100*(n=(Z=Math.max(o,i,e))-a)/255,t=a/(255-n)*100,0===n?s=Number.NaN:(o===Z&&(s=(i-e)/n),i===Z&&(s=2+(e-o)/n),e===Z&&(s=4+(o-i)/n),(s*=60)<0&&(s+=360)),[s,r,t]},w.hcg=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["hcg"]),function(){})},h.hcg=B,t.prototype.hcg=function(){return st(this._rgb)},M=function(t){var e,r,n,i,s,a,o,l;if(t=t.toLowerCase(),null!=w.colors&&w.colors[t])return C(w.colors[t]);if(s=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(o=s.slice(1,4),i=a=0;a<=2;i=++a)o[i]=+o[i];o[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(o=s.slice(1,5),i=l=0;l<=3;i=++l)o[i]=+o[i];else if(s=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(o=s.slice(1,4),i=e=0;e<=2;i=++e)o[i]=vt(2.55*o[i]);o[3]=1}else if(s=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(o=s.slice(1,5),i=r=0;r<=2;i=++r)o[i]=vt(2.55*o[i]);o[3]=+o[3]}else(s=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=s.slice(1,4))[1]*=.01,n[2]*=.01,(o=A(n))[3]=1):(s=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=s.slice(1,4))[1]*=.01,n[2]*=.01,(o=A(n))[3]=+s[4]);return o},it=function(t){var e;return"rgb"===(e=t[3]<1?"rgba":"rgb")?e+"("+t.slice(0,3).map(vt).join(",")+")":"rgba"===e?e+"("+t.slice(0,3).map(vt).join(",")+","+t[3]+")":void 0},yt=function(t){return vt(100*t)/100},V=function(t,e){var r;return r=e<1?"hsla":"hsl",t[0]=yt(t[0]||0),t[1]=yt(100*t[1])+"%",t[2]=yt(100*t[2])+"%","hsla"===r&&(t[3]=e),r+"("+t.join(",")+")"},h.css=function(t){return M(t)},w.css=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?it(this._rgb):"hsl"===t.slice(0,3)?V(this.hsl(),this.alpha()):void 0},h.named=function(t){return C(Mt[t])},f.push({p:5,test:function(t){if(1===arguments.length&&null!=Mt[t])return"named"}}),t.prototype.name=function(t){var e,r;for(r in arguments.length&&(Mt[t]&&(this._rgb=C(Mt[t])),this._rgb[3]=1),e=this.hex("rgb"),Mt)if(e===Mt[r])return r;return e},D=function(){var t,e,r,i;return r=(i=Et(arguments))[0],t=i[1],e=i[2],[r,E(e*=n)*t,mt(e)*t]},H=function(){var t,e,r,n,i,s,a,o,l;return a=(r=Et(arguments))[0],i=r[1],s=r[2],t=(o=D(a,i,s))[0],e=o[1],n=o[2],[(l=W(t,e,n))[0],l[1],n=l[2],r.length>3?r[3]:1]},G=function(){var t,e,r,n,i,s;return i=(s=Et(arguments))[0],t=s[1],e=s[2],r=wt(t*t+e*e),n=(p(e,t)*o+360)%360,0===vt(1e4*r)&&(n=Number.NaN),[i,r,n]},ut=function(){var t,e,r,n,i,s,a;return i=(s=Et(arguments))[0],r=s[1],e=s[2],n=(a=ft(i,r,e))[0],t=a[1],e=a[2],G(n,t,e)},w.lch=function(){var e;return e=Et(arguments),new t(e,"lch")},w.hcl=function(){var e;return e=Et(arguments),new t(e,"hcl")},h.lch=H,h.hcl=function(){var t,e,r,n;return e=(n=Et(arguments))[0],t=n[1],r=n[2],H([r,t,e])},t.prototype.lch=function(){return ut(this._rgb)},t.prototype.hcl=function(){return ut(this._rgb).reverse()},nt=function(t){var e,r,n,i,s,a;return null==t&&(t="rgb"),s=(a=Et(arguments))[0],n=a[1],e=a[2],n/=255,e/=255,[(1-(s/=255)-(i=1-Math.max(s,Math.max(n,e))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-e-i)*r,i]},R=function(){var t,e,r,n,i,s;return r=(e=Et(arguments))[0],i=e[1],s=e[2],n=e[3],t=e.length>4?e[4]:1,1===n?[0,0,0,t]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),s>=1?0:255*(1-s)*(1-n),t]},h.cmyk=function(){return R(Et(arguments))},w.cmyk=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return nt(this._rgb)},h.gl=function(){var t,e,r,n,i;for(n=function(){var t,r;for(e in r=[],t=Et(arguments))i=t[e],r.push(i);return r}.apply(this,arguments),t=r=0;r<=2;t=++r)n[t]*=255;return n},w.gl=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return[(t=this._rgb)[0]/255,t[1]/255,t[2]/255,t[3]]},ht=function(t,e,r){var n;return t=(n=Et(arguments))[0],e=n[1],r=n[2],.2126*(t=$(t))+.7152*(e=$(e))+.0722*(r=$(r))},$=function(t){return(t/=255)<=.03928?t/12.92:rt((t+.055)/1.055,2.4)},J=function(e,r,n,i){var s,a;return s=e._rgb,a=r._rgb,new t(s[0]+n*(a[0]-s[0]),s[1]+n*(a[1]-s[1]),s[2]+n*(a[2]-s[2]),i)},d.push(["rgb",J]),t.prototype.luminance=function(t,e){var r,n,i,s,a;return null==e&&(e="rgb"),arguments.length?(s=this._rgb,0===t?s=[0,0,0,this._rgb[3]]:1===t?s=[255,255,255,this[3]]:(r=ht(this._rgb),n=1e-7,i=20,a=function(r,s){var o,l;return o=(l=r.interpolate(s,.5,e)).luminance(),Math.abs(t-o)<n||!i--?l:o>t?a(r,l):a(l,s)},s=r>t?a(w("black"),this).rgba():a(this,w("white")).rgba()),w(s).alpha(this.alpha())):ht(this._rgb)},kt=function(t){var e,r,n,i;return(i=t/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*U(r),e=i<20?0:.8274096064007395*(e=i-10)-254.76935184120902+115.67994401066147*U(e)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*U(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*U(r),e=255),[n,r,e]},bt=function(){var t,e,r,n,i,s,a;for(n=(i=Et(arguments))[0],i[1],t=i[2],r=1e3,e=4e4,.4;e-r>.4;)(s=kt(a=.5*(e+r)))[2]/s[0]>=t/n?e=a:r=a;return vt(a)},w.temperature=w.kelvin=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=kt,t.prototype.temperature=function(){return bt(this._rgb)},t.prototype.kelvin=t.prototype.temperature,w.contrast=function(e,r){var n,i,s,a;return"string"!==(s=Rt(e))&&"number"!==s||(e=new t(e)),"string"!==(a=Rt(r))&&"number"!==a||(r=new t(r)),(n=e.luminance())>(i=r.luminance())?(n+.05)/(i+.05):(i+.05)/(n+.05)},w.distance=function(e,r,n){var i,s,a,o,l,c,f;for(s in null==n&&(n="lab"),"string"!==(l=Rt(e))&&"number"!==l||(e=new t(e)),"string"!==(c=Rt(r))&&"number"!==c||(r=new t(r)),a=e.get(n),o=r.get(n),f=0,a)f+=(i=(a[s]||0)-(o[s]||0))*i;return Math.sqrt(f)},w.deltaE=function(e,r,n,i){var a,o,l,c,f,u,h,d,g,y,v,x,m,w,k,R,M,P,N,L,S,B,C,_;for(null==n&&(n=1),null==i&&(i=1),"string"!==(k=Rt(e))&&"number"!==k||(e=new t(e)),"string"!==(R=Rt(r))&&"number"!==R||(r=new t(r)),a=(M=e.lab())[0],l=M[1],f=M[2],o=(P=r.lab())[0],c=P[1],u=P[2],h=wt(l*l+f*f),d=wt(c*c+u*u),L=a<16?.511:.040975*a/(1+.01765*a),N=.0638*h/(1+.0131*h)+.638,w=h<1e-6?0:180*p(f,l)/s;w<0;)w+=360;for(;w>=360;)w-=360;return S=w>=164&&w<=345?.56+b(.2*E(s*(w+168)/180)):.36+b(.4*E(s*(w+35)/180)),m=wt((g=h*h*h*h)/(g+1900)),wt((B=(a-o)/(n*L))*B+(C=(x=h-d)/(i*N))*C+((y=l-c)*y+(v=f-u)*v-x*x)/((_=N*(m*S+1-m))*_))},t.prototype.get=function(t){var e,r,n,i,s;return this,n=(i=t.split("."))[0],e=i[1],s=this[n](),e?(r=n.indexOf(e))>-1?s[r]:console.warn("unknown channel "+e+" in mode "+n):s},t.prototype.set=function(t,e){var r,n,i,s,a;if(this,i=(s=t.split("."))[0],r=s[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===Rt(e))switch(e.charAt(0)){case"+":case"-":a[n]+=+e;break;case"*":a[n]*=+e.substr(1);break;case"/":a[n]/=+e.substr(1);break;default:a[n]=+e}else a[n]=e;else console.warn("unknown channel "+r+" in mode "+i);else a=e;return w(a,i).alpha(this.alpha())},t.prototype.clipped=function(){return this._rgb._clipped||!1},t.prototype.alpha=function(t){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],t]):this._rgb[3]},t.prototype.darken=function(t){var e;return null==t&&(t=1),this,(e=this.lab())[0]-=i.Kn*t,w.lab(e).alpha(this.alpha())},t.prototype.brighten=function(t){return null==t&&(t=1),this.darken(-t)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var e;return null==t&&(t=1),this,(e=this.lch())[1]+=t*i.Kn,e[1]<0&&(e[1]=0),w.lch(e).alpha(this.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=1),this.saturate(-t)},t.prototype.premultiply=function(){var t,e;return e=this.rgb(),t=this.alpha(),w(e[0]*t,e[1]*t,e[2]*t,t)},Q=function(t,e){return t*e/255},P=function(t,e){return t>e?e:t},Y=function(t,e){return t>e?t:e},xt=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},et=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},m=function(t,e){return 255*(1-(1-e/255)/(t/255))},N=function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t},(y=function(t,e,r){if(!y[r])throw"unknown blend mode "+r;return y[r](t,e)}).normal=(v=function(t){return function(e,r){var n,i;return n=w(r).rgb(),i=w(e).rgb(),w(t(n,i),"rgb")}})((L=function(t){return function(e,r){var n,i,s;for(s=[],n=i=0;i<=3;n=++i)s[n]=t(e[n],r[n]);return s}})(function(t,e){return t})),y.multiply=v(L(Q)),y.screen=v(L(xt)),y.overlay=v(L(et)),y.darken=v(L(P)),y.lighten=v(L(Y)),y.dodge=v(L(N)),y.burn=v(L(m)),w.blend=y,w.analyze=function(t){var e,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,e=t.length;r<e;r++)null==(i=t[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(t,e){return w.limits(n,t,e)},n},w.scale=function(t,e){var r,n,i,s,a,o,l,c,f,u,h,d,b,p,g,y,v,x,m,k,R;return f="rgb",u=w("#ccc"),p=0,!1,a=[0,1],b=[],d=[0,0],r=!1,i=[],h=!1,c=0,l=1,s=!1,n={},g=!0,o=1,k=function(t){var e,r,n,s,a,o;if(null==t&&(t=["#fff","#000"]),null!=t&&"string"===Rt(t)&&null!=w.brewer&&(t=w.brewer[t]||w.brewer[t.toLowerCase()]||t),"array"===Rt(t)){for(1===t.length&&(t=[t[0],t[0]]),e=n=0,s=(t=t.slice(0)).length-1;0<=s?n<=s:n>=s;e=0<=s?++n:--n)r=t[e],"string"===Rt(r)&&(t[e]=w(r));for(b.length=0,e=o=0,a=t.length-1;0<=a?o<=a:o>=a;e=0<=a?++o:--o)b.push(e/(t.length-1))}return m(),i=t},v=function(t){var e,n;if(null!=r){for(n=r.length-1,e=0;e<n&&t>=r[e];)e++;return e-1}return 0},R=function(t){return t},function(t){var e,n,i,s,a;return a=t,r.length>2&&(s=r.length-1,e=v(t),i=r[0]+(r[1]-r[0])*(0+.5*p),n=r[s-1]+(r[s]-r[s-1])*(1-.5*p),a=c+(r[e]+.5*(r[e+1]-r[e])-i)/(n-i)*(l-c)),a},x=function(t,e){var s,a,h,p,y,x,m;if(null==e&&(e=!1),isNaN(t)||null===t)return u;if(m=e?t:r&&r.length>2?v(t)/(r.length-2):l!==c?(t-c)/(l-c):1,e||(m=R(m)),1!==o&&(m=rt(m,o)),m=d[0]+m*(1-d[0]-d[1]),m=Math.min(1,Math.max(0,m)),h=Math.floor(1e4*m),g&&n[h])s=n[h];else{if("array"===Rt(i))for(a=p=0,x=b.length-1;0<=x?p<=x:p>=x;a=0<=x?++p:--p){if(m<=(y=b[a])){s=i[a];break}if(m>=y&&a===b.length-1){s=i[a];break}if(m>y&&m<b[a+1]){m=(m-y)/(b[a+1]-y),s=w.interpolate(i[a],i[a+1],m,f);break}}else"function"===Rt(i)&&(s=i(m));g&&(n[h]=s)}return s},m=function(){return n={}},k(t),(y=function(t){var e;return e=w(x(t)),h&&e[h]?e[h]():e}).classes=function(t){var e;return null!=t?("array"===Rt(t)?(r=t,a=[t[0],t[t.length-1]]):(e=w.analyze(a),r=0===t?[e.min,e.max]:w.limits(e,"e",t)),y):r},y.domain=function(t){var e,r,n,s,o,f,u;if(!arguments.length)return a;if(c=t[0],l=t[t.length-1],b=[],n=i.length,t.length===n&&c!==l)for(o=0,s=t.length;o<s;o++)r=t[o],b.push((r-c)/(l-c));else for(e=u=0,f=n-1;0<=f?u<=f:u>=f;e=0<=f?++u:--u)b.push(e/(n-1));return a=[c,l],y},y.mode=function(t){return arguments.length?(f=t,m(),y):f},y.range=function(t,e){return k(t),y},y.out=function(t){return h=t,y},y.spread=function(t){return arguments.length?(p=t,y):p},y.correctLightness=function(t){return null==t&&(t=!0),s=t,m(),R=s?function(t){var e,r,n,i,s,a,o,l,c;for(e=x(0,!0).lab()[0],r=x(1,!0).lab()[0],o=e>r,n=x(t,!0).lab()[0],i=n-(s=e+(r-e)*t),l=0,c=1,a=20;Math.abs(i)>.01&&a-- >0;)o&&(i*=-1),i<0?(l=t,t+=.5*(c-t)):(c=t,t+=.5*(l-t)),n=x(t,!0).lab()[0],i=n-s;return t}:function(t){return t},y},y.padding=function(t){return null!=t?("number"===Rt(t)&&(t=[t,t]),d=t,y):d},y.colors=function(e,n){var s,o,l,c,f,u,h,d;if(arguments.length<2&&(n="hex"),f=[],0===arguments.length)f=i.slice(0);else if(1===e)f=[y(.5)];else if(e>1)o=a[0],s=a[1]-o,f=function(){u=[];for(var t=0;0<=e?t<e:t>e;0<=e?t++:t--)u.push(t);return u}.apply(this).map(function(t){return y(o+t/(e-1)*s)});else{if(t=[],h=[],r&&r.length>2)for(l=d=1,c=r.length;1<=c?d<c:d>c;l=1<=c?++d:--d)h.push(.5*(r[l-1]+r[l]));else h=a;f=h.map(function(t){return y(t)})}return w[n]&&(f=f.map(function(t){return t[n]()})),f},y.cache=function(t){return null!=t?(g=t,y):g},y.gamma=function(t){return null!=t?(o=t,y):o},y.nodata=function(t){return null!=t?(u=w(t),y):u},y},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(t,e,r){var n,i,s,a,o,l;if(o={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(t){null==t||isNaN(t)||(o.values.push(t),o.sum+=t,t<o.min&&(o.min=t),t>o.max&&(o.max=t),o.count+=1)},l=function(t,i){if(r(t,i))return null!=e&&"function"===Rt(e)?n(e(t)):null!=e&&"string"===Rt(e)||"number"===Rt(e)?n(t[e]):n(t)},"array"===Rt(t))for(a=0,s=t.length;a<s;a++)l(t[a]);else for(i in t)l(t[i],i);return o.domain=[o.min,o.max],o.limits=function(t,e){return w.limits(o,t,e)},o},w.limits=function(t,e,r){var n,i,s,a,o,l,c,f,u,h,d,p,g,y,v,x,m,k,R,E,M,P,N,L,B,C,_,V,A,q,O,j,I,z,T,J,G,W,F,D,H,Y,X,$,K,Q,tt,et,nt,it,st,at,ot,lt,ct;if(null==e&&(e="equal"),null==r&&(r=7),"array"===Rt(t)&&(t=w.analyze(t)),B=t.min,Z=t.max,t.sum,lt=t.values.sort(function(t,e){return t-e}),1===r)return[B,Z];if(N=[],"c"===e.substr(0,1)&&(N.push(B),N.push(Z)),"e"===e.substr(0,1)){for(N.push(B),E=O=1,T=r-1;1<=T?O<=T:O>=T;E=1<=T?++O:--O)N.push(B+E/r*(Z-B));N.push(Z)}else if("l"===e.substr(0,1)){if(B<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*U(B),L=Math.LOG10E*U(Z),N.push(B),E=ct=1,J=r-1;1<=J?ct<=J:ct>=J;E=1<=J?++ct:--ct)N.push(rt(10,C+E/r*(L-C)));N.push(Z)}else if("q"===e.substr(0,1)){for(N.push(B),E=n=1,Y=r-1;1<=Y?n<=Y:n>=Y;E=1<=Y?++n:--n)j=(lt.length-1)*E/r,(I=S(j))===j?N.push(lt[I]):(z=j-I,N.push(lt[I]*(1-z)+lt[I+1]*z));N.push(Z)}else if("k"===e.substr(0,1)){for(V=lt.length,y=new Array(V),k=new Array(r),it=!0,A=0,x=null,(x=[]).push(B),E=i=1,X=r-1;1<=X?i<=X:i>=X;E=1<=X?++i:--i)x.push(B+E/r*(Z-B));for(x.push(Z);it;){for(M=s=0,$=r-1;0<=$?s<=$:s>=$;M=0<=$?++s:--s)k[M]=0;for(E=a=0,K=V-1;0<=K?a<=K:a>=K;E=0<=K?++a:--a){for(ot=lt[E],_=Number.MAX_VALUE,M=o=0,Q=r-1;0<=Q?o<=Q:o>=Q;M=0<=Q?++o:--o)(R=b(x[M]-ot))<_&&(_=R,v=M);k[v]++,y[E]=v}for(q=new Array(r),M=l=0,tt=r-1;0<=tt?l<=tt:l>=tt;M=0<=tt?++l:--l)q[M]=null;for(E=c=0,et=V-1;0<=et?c<=et:c>=et;E=0<=et?++c:--c)null===q[m=y[E]]?q[m]=lt[E]:q[m]+=lt[E];for(M=f=0,nt=r-1;0<=nt?f<=nt:f>=nt;M=0<=nt?++f:--f)q[M]*=1/k[M];for(it=!1,M=u=0,G=r-1;0<=G?u<=G:u>=G;M=0<=G?++u:--u)if(q[M]!==x[E]){it=!0;break}x=q,++A>200&&(it=!1)}for(P={},M=h=0,W=r-1;0<=W?h<=W:h>=W;M=0<=W?++h:--h)P[M]=[];for(E=d=0,F=V-1;0<=F?d<=F:d>=F;E=0<=F?++d:--d)P[m=y[E]].push(lt[E]);for(st=[],M=p=0,D=r-1;0<=D?p<=D:p>=D;M=0<=D?++p:--p)st.push(P[M][0]),st.push(P[M][P[M].length-1]);for(st=st.sort(function(t,e){return t-e}),N.push(st[0]),E=g=1,H=st.length-1;g<=H;E=g+=2)at=st[E],isNaN(at)||-1!==N.indexOf(at)||N.push(at)}return N},_=function(t,e,r){var n,i,s,o;return t=(n=Et(arguments))[0],e=n[1],r=n[2],isNaN(t)&&(t=0),(t/=360)<1/3?s=1-((i=(1-e)/3)+(o=(1+e*E(l*t)/E(a-l*t))/3)):t<2/3?i=1-((o=(1-e)/3)+(s=(1+e*E(l*(t-=1/3))/E(a-l*t))/3)):o=1-((s=(1-e)/3)+(i=(1+e*E(l*(t-=2/3))/E(a-l*t))/3)),[255*(o=X(r*o*3)),255*(s=X(r*s*3)),255*(i=X(r*i*3)),n.length>3?n[3]:1]},ot=function(){var t,e,r,n,i,s,a;return i=(s=Et(arguments))[0],e=s[1],t=s[2],l=2*Math.PI,i/=255,e/=255,t/=255,0===(a=1-Math.min(i,e,t)/(n=(i+e+t)/3))?r=0:(r=(i-e+(i-t))/2,r/=Math.sqrt((i-e)*(i-e)+(i-t)*(e-t)),r=Math.acos(r),t>e&&(r=l-r),r/=l),[360*r,a,n]},w.hsi=function(){return function(t,e,r){r.prototype=t.prototype;var n=new r,i=t.apply(n,e);return Object(i)===i?i:n}(t,Lt.call(arguments).concat(["hsi"]),function(){})},h.hsi=_,t.prototype.hsi=function(){return ot(this._rgb)},j=function(t,e,r,n){var i,s,a,o,l,c,f,u,h,d;return"hsl"===n?(h=t.hsl(),d=e.hsl()):"hsv"===n?(h=t.hsv(),d=e.hsv()):"hcg"===n?(h=t.hcg(),d=e.hcg()):"hsi"===n?(h=t.hsi(),d=e.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",h=t.hcl(),d=e.hcl()),"h"===n.substr(0,1)&&(s=h[0],f=h[1],o=h[2],a=d[0],u=d[1],l=d[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?i=Number.NaN:(i=a,1!==o&&0!==o||"hsv"===n||(c=u)):(i=s,1!==l&&0!==l||"hsv"===n||(c=f)):i=s+r*(a>s&&a-s>180?a-(s+360):a<s&&s-a>180?a+360-s:a-s),null==c&&(c=f+r*(u-f)),w[n](i,c,o+r*(l-o))},T=function(t,e,r,n){var i,s;return i=t.num(),s=e.num(),w.num(i+(s-i)*r,"num")},(d=d.concat(function(){var t,e,r,n;for(n=[],e=0,t=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;e<t;e++)K=r[e],n.push([K,j]);return n}())).push(["num",T]),I=function(e,r,n,i){var s,a;return s=e.lab(),a=r.lab(),new t(s[0]+n*(a[0]-s[0]),s[1]+n*(a[1]-s[1]),s[2]+n*(a[2]-s[2]),i)},d.push(["lab",I])}).call(this)},{}],2:[function(t,e,r){function n(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}n.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var t=this.beachline.getFirst(this.beachline.root);t;)this.beachsectionJunkyard.push(t),t=t.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},n.prototype.sqrt=Math.sqrt,n.prototype.abs=Math.abs,n.prototype.ε=n.ε=1e-9,n.prototype.invε=n.invε=1/n.ε,n.prototype.equalWithEpsilon=function(t,e){return this.abs(t-e)<1e-9},n.prototype.greaterThanWithEpsilon=function(t,e){return t-e>1e-9},n.prototype.greaterThanOrEqualWithEpsilon=function(t,e){return e-t<1e-9},n.prototype.lessThanWithEpsilon=function(t,e){return e-t>1e-9},n.prototype.lessThanOrEqualWithEpsilon=function(t,e){return t-e<1e-9},n.prototype.RBTree=function(){this.root=null},n.prototype.RBTree.prototype.rbInsertSuccessor=function(t,e){var r,n,i;if(t){if(e.rbPrevious=t,e.rbNext=t.rbNext,t.rbNext&&(t.rbNext.rbPrevious=e),t.rbNext=e,t.rbRight){for(t=t.rbRight;t.rbLeft;)t=t.rbLeft;t.rbLeft=e}else t.rbRight=e;r=t}else this.root?(t=this.getFirst(this.root),e.rbPrevious=null,e.rbNext=t,t.rbPrevious=e,t.rbLeft=e,r=t):(e.rbPrevious=e.rbNext=null,this.root=e,r=null);for(e.rbLeft=e.rbRight=null,e.rbParent=r,e.rbRed=!0,t=e;r&&r.rbRed;)r===(n=r.rbParent).rbLeft?(i=n.rbRight)&&i.rbRed?(r.rbRed=i.rbRed=!1,n.rbRed=!0,t=n):(t===r.rbRight&&(this.rbRotateLeft(r),r=(t=r).rbParent),r.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n)):(i=n.rbLeft)&&i.rbRed?(r.rbRed=i.rbRed=!1,n.rbRed=!0,t=n):(t===r.rbLeft&&(this.rbRotateRight(r),r=(t=r).rbParent),r.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n)),r=t.rbParent;this.root.rbRed=!1},n.prototype.RBTree.prototype.rbRemoveNode=function(t){t.rbNext&&(t.rbNext.rbPrevious=t.rbPrevious),t.rbPrevious&&(t.rbPrevious.rbNext=t.rbNext),t.rbNext=t.rbPrevious=null;var e,r,n=t.rbParent,i=t.rbLeft,s=t.rbRight;if(e=i?s?this.getFirst(s):i:s,n?n.rbLeft===t?n.rbLeft=e:n.rbRight=e:this.root=e,i&&s?(r=e.rbRed,e.rbRed=t.rbRed,e.rbLeft=i,i.rbParent=e,e!==s?(n=e.rbParent,e.rbParent=t.rbParent,t=e.rbRight,n.rbLeft=t,e.rbRight=s,s.rbParent=e):(e.rbParent=n,n=e,t=e.rbRight)):(r=t.rbRed,t=e),t&&(t.rbParent=n),!r)if(t&&t.rbRed)t.rbRed=!1;else{var a;do{if(t===this.root)break;if(t===n.rbLeft){if((a=n.rbRight).rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),a=n.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=n.rbRight),a.rbRed=n.rbRed,n.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(n),t=this.root;break}}else if((a=n.rbLeft).rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),a=n.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=n.rbLeft),a.rbRed=n.rbRed,n.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(n),t=this.root;break}a.rbRed=!0,t=n,n=n.rbParent}while(!t.rbRed);t&&(t.rbRed=!1)}},n.prototype.RBTree.prototype.rbRotateLeft=function(t){var e=t,r=t.rbRight,n=e.rbParent;n?n.rbLeft===e?n.rbLeft=r:n.rbRight=r:this.root=r,r.rbParent=n,e.rbParent=r,e.rbRight=r.rbLeft,e.rbRight&&(e.rbRight.rbParent=e),r.rbLeft=e},n.prototype.RBTree.prototype.rbRotateRight=function(t){var e=t,r=t.rbLeft,n=e.rbParent;n?n.rbLeft===e?n.rbLeft=r:n.rbRight=r:this.root=r,r.rbParent=n,e.rbParent=r,e.rbLeft=r.rbRight,e.rbLeft&&(e.rbLeft.rbParent=e),r.rbRight=e},n.prototype.RBTree.prototype.getFirst=function(t){for(;t.rbLeft;)t=t.rbLeft;return t},n.prototype.RBTree.prototype.getLast=function(t){for(;t.rbRight;)t=t.rbRight;return t},n.prototype.Diagram=function(t){this.site=t},n.prototype.Cell=function(t){this.site=t,this.halfedges=[],this.closeMe=!1},n.prototype.Cell.prototype.init=function(t){return this.site=t,this.halfedges=[],this.closeMe=!1,this},n.prototype.createCell=function(t){var e=this.cellJunkyard.pop();return e?e.init(t):new this.Cell(t)},n.prototype.Cell.prototype.prepareHalfedges=function(){for(var t,e=this.halfedges,r=e.length;r--;)(t=e[r].edge).vb&&t.va||e.splice(r,1);return e.sort(function(t,e){return e.angle-t.angle}),e.length},n.prototype.Cell.prototype.getNeighborIds=function(){for(var t,e=[],r=this.halfedges.length;r--;)null!==(t=this.halfedges[r].edge).lSite&&t.lSite.voronoiId!=this.site.voronoiId?e.push(t.lSite.voronoiId):null!==t.rSite&&t.rSite.voronoiId!=this.site.voronoiId&&e.push(t.rSite.voronoiId);return e},n.prototype.Cell.prototype.getBbox=function(){for(var t,e,r,n=this.halfedges,i=n.length,s=1/0,a=1/0,o=-1/0,l=-1/0;i--;)e=(t=n[i].getStartpoint()).x,r=t.y,e<s&&(s=e),r<a&&(a=r),e>o&&(o=e),r>l&&(l=r);return{x:s,y:a,width:o-s,height:l-a}},n.prototype.Cell.prototype.pointIntersection=function(t,e){for(var r,n,i,s,a=this.halfedges,o=a.length;o--;){if(n=(r=a[o]).getStartpoint(),i=r.getEndpoint(),!(s=(e-n.y)*(i.x-n.x)-(t-n.x)*(i.y-n.y)))return 0;if(s>0)return-1}return 1},n.prototype.Vertex=function(t,e){this.x=t,this.y=e},n.prototype.Edge=function(t,e){this.lSite=t,this.rSite=e,this.va=this.vb=null},n.prototype.Halfedge=function(t,e,r){if(this.site=e,this.edge=t,r)this.angle=Math.atan2(r.y-e.y,r.x-e.x);else{var n=t.va,i=t.vb;this.angle=t.lSite===e?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}},n.prototype.createHalfedge=function(t,e,r){return new this.Halfedge(t,e,r)},n.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},n.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},n.prototype.createVertex=function(t,e){var r=this.vertexJunkyard.pop();return r?(r.x=t,r.y=e):r=new this.Vertex(t,e),this.vertices.push(r),r},n.prototype.createEdge=function(t,e,r,n){var i=this.edgeJunkyard.pop();return i?(i.lSite=t,i.rSite=e,i.va=i.vb=null):i=new this.Edge(t,e),this.edges.push(i),r&&this.setEdgeStartpoint(i,t,e,r),n&&this.setEdgeEndpoint(i,t,e,n),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(i,t,e)),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(i,e,t)),i},n.prototype.createBorderEdge=function(t,e,r){var n=this.edgeJunkyard.pop();return n?(n.lSite=t,n.rSite=null):n=new this.Edge(t,null),n.va=e,n.vb=r,this.edges.push(n),n},n.prototype.setEdgeStartpoint=function(t,e,r,n){t.va||t.vb?t.lSite===r?t.vb=n:t.va=n:(t.va=n,t.lSite=e,t.rSite=r)},n.prototype.setEdgeEndpoint=function(t,e,r,n){this.setEdgeStartpoint(t,r,e,n)},n.prototype.Beachsection=function(){},n.prototype.createBeachsection=function(t){var e=this.beachsectionJunkyard.pop();return e||(e=new this.Beachsection),e.site=t,e},n.prototype.leftBreakPoint=function(t,e){var r=t.site,n=r.x,i=r.y,s=i-e;if(!s)return n;var a=t.rbPrevious;if(!a)return-1/0;var o=(r=a.site).x,l=r.y,c=l-e;if(!c)return o;var f=o-n,u=1/s-1/c,h=f/c;return u?(-h+this.sqrt(h*h-2*u*(f*f/(-2*c)-l+c/2+i-s/2)))/u+n:(n+o)/2},n.prototype.rightBreakPoint=function(t,e){var r=t.rbNext;if(r)return this.leftBreakPoint(r,e);var n=t.site;return n.y===e?n.x:1/0},n.prototype.detachBeachsection=function(t){this.detachCircleEvent(t),this.beachline.rbRemoveNode(t),this.beachsectionJunkyard.push(t)},n.prototype.removeBeachsection=function(t){var e=t.circleEvent,r=e.x,n=e.ycenter,i=this.createVertex(r,n),s=t.rbPrevious,a=t.rbNext,o=[t],l=Math.abs;this.detachBeachsection(t);for(var c=s;c.circleEvent&&l(r-c.circleEvent.x)<1e-9&&l(n-c.circleEvent.ycenter)<1e-9;)s=c.rbPrevious,o.unshift(c),this.detachBeachsection(c),c=s;o.unshift(c),this.detachCircleEvent(c);for(var f=a;f.circleEvent&&l(r-f.circleEvent.x)<1e-9&&l(n-f.circleEvent.ycenter)<1e-9;)a=f.rbNext,o.push(f),this.detachBeachsection(f),f=a;o.push(f),this.detachCircleEvent(f);var u,h=o.length;for(u=1;u<h;u++)f=o[u],c=o[u-1],this.setEdgeStartpoint(f.edge,c.site,f.site,i);c=o[0],(f=o[h-1]).edge=this.createEdge(c.site,f.site,void 0,i),this.attachCircleEvent(c),this.attachCircleEvent(f)},n.prototype.addBeachsection=function(t){for(var e,r,n,i,s=t.x,a=t.y,o=this.beachline.root;o;)if((n=this.leftBreakPoint(o,a)-s)>1e-9)o=o.rbLeft;else{if(!((i=s-this.rightBreakPoint(o,a))>1e-9)){n>-1e-9?(e=o.rbPrevious,r=o):i>-1e-9?(e=o,r=o.rbNext):e=r=o;break}if(!o.rbRight){e=o;break}o=o.rbRight}var l=this.createBeachsection(t);if(this.beachline.rbInsertSuccessor(e,l),e||r){if(e===r)return this.detachCircleEvent(e),r=this.createBeachsection(e.site),this.beachline.rbInsertSuccessor(l,r),l.edge=r.edge=this.createEdge(e.site,l.site),this.attachCircleEvent(e),void this.attachCircleEvent(r);if(!e||r){if(e!==r){this.detachCircleEvent(e),this.detachCircleEvent(r);var c=e.site,f=c.x,u=c.y,h=t.x-f,d=t.y-u,b=r.site,p=b.x-f,g=b.y-u,y=2*(h*g-d*p),v=h*h+d*d,x=p*p+g*g,m=this.createVertex((g*v-d*x)/y+f,(h*x-p*v)/y+u);return this.setEdgeStartpoint(r.edge,c,b,m),l.edge=this.createEdge(c,t,void 0,m),r.edge=this.createEdge(t,b,void 0,m),this.attachCircleEvent(e),void this.attachCircleEvent(r)}}else l.edge=this.createEdge(e.site,l.site)}},n.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},n.prototype.attachCircleEvent=function(t){var e=t.rbPrevious,r=t.rbNext;if(e&&r){var n=e.site,i=t.site,s=r.site;if(n!==s){var a=i.x,o=i.y,l=n.x-a,c=n.y-o,f=s.x-a,u=s.y-o,h=2*(l*u-c*f);if(!(h>=-2e-12)){var d=l*l+c*c,b=f*f+u*u,p=(u*d-c*b)/h,g=(l*b-f*d)/h,y=g+o,v=this.circleEventJunkyard.pop();v||(v=new this.CircleEvent),v.arc=t,v.site=i,v.x=p+a,v.y=y+this.sqrt(p*p+g*g),v.ycenter=y,t.circleEvent=v;for(var x=null,m=this.circleEvents.root;m;)if(v.y<m.y||v.y===m.y&&v.x<=m.x){if(!m.rbLeft){x=m.rbPrevious;break}m=m.rbLeft}else{if(!m.rbRight){x=m;break}m=m.rbRight}this.circleEvents.rbInsertSuccessor(x,v),x||(this.firstCircleEvent=v)}}}},n.prototype.detachCircleEvent=function(t){var e=t.circleEvent;e&&(e.rbPrevious||(this.firstCircleEvent=e.rbNext),this.circleEvents.rbRemoveNode(e),this.circleEventJunkyard.push(e),t.circleEvent=null)},n.prototype.connectEdge=function(t,e){var r=t.vb;if(r)return!0;var n,i,s=t.va,a=e.xl,o=e.xr,l=e.yt,c=e.yb,f=t.lSite,u=t.rSite,h=f.x,d=f.y,b=u.x,p=u.y,g=(h+b)/2,y=(d+p)/2;if(this.cells[f.voronoiId].closeMe=!0,this.cells[u.voronoiId].closeMe=!0,p!==d&&(i=y-(n=(h-b)/(p-d))*g),void 0===n){if(g<a||g>=o)return!1;if(h>b){if(!s||s.y<l)s=this.createVertex(g,l);else if(s.y>=c)return!1;r=this.createVertex(g,c)}else{if(!s||s.y>c)s=this.createVertex(g,c);else if(s.y<l)return!1;r=this.createVertex(g,l)}}else if(n<-1||n>1)if(h>b){if(!s||s.y<l)s=this.createVertex((l-i)/n,l);else if(s.y>=c)return!1;r=this.createVertex((c-i)/n,c)}else{if(!s||s.y>c)s=this.createVertex((c-i)/n,c);else if(s.y<l)return!1;r=this.createVertex((l-i)/n,l)}else if(d<p){if(!s||s.x<a)s=this.createVertex(a,n*a+i);else if(s.x>=o)return!1;r=this.createVertex(o,n*o+i)}else{if(!s||s.x>o)s=this.createVertex(o,n*o+i);else if(s.x<a)return!1;r=this.createVertex(a,n*a+i)}return t.va=s,t.vb=r,!0},n.prototype.clipEdge=function(t,e){var r=t.va.x,n=t.va.y,i=0,s=1,a=t.vb.x-r,o=t.vb.y-n,l=r-e.xl;if(0===a&&l<0)return!1;var c=-l/a;if(a<0){if(c<i)return!1;c<s&&(s=c)}else if(a>0){if(c>s)return!1;c>i&&(i=c)}if(l=e.xr-r,0===a&&l<0)return!1;if(c=l/a,a<0){if(c>s)return!1;c>i&&(i=c)}else if(a>0){if(c<i)return!1;c<s&&(s=c)}if(l=n-e.yt,0===o&&l<0)return!1;if(c=-l/o,o<0){if(c<i)return!1;c<s&&(s=c)}else if(o>0){if(c>s)return!1;c>i&&(i=c)}if(l=e.yb-n,0===o&&l<0)return!1;if(c=l/o,o<0){if(c>s)return!1;c>i&&(i=c)}else if(o>0){if(c<i)return!1;c<s&&(s=c)}return i>0&&(t.va=this.createVertex(r+i*a,n+i*o)),s<1&&(t.vb=this.createVertex(r+s*a,n+s*o)),(i>0||s<1)&&(this.cells[t.lSite.voronoiId].closeMe=!0,this.cells[t.rSite.voronoiId].closeMe=!0),!0},n.prototype.clipEdges=function(t){for(var e,r=this.edges,n=r.length,i=Math.abs;n--;)e=r[n],(!this.connectEdge(e,t)||!this.clipEdge(e,t)||i(e.va.x-e.vb.x)<1e-9&&i(e.va.y-e.vb.y)<1e-9)&&(e.va=e.vb=null,r.splice(n,1))},n.prototype.closeCells=function(t){for(var e,r,n,i,s,a,o,l,c,f=t.xl,u=t.xr,h=t.yt,d=t.yb,b=this.cells,p=b.length,g=Math.abs;p--;)if((e=b[p]).prepareHalfedges()&&e.closeMe){for(i=(n=e.halfedges).length,r=0;r<i;){if(a=n[r].getEndpoint(),l=n[(r+1)%i].getStartpoint(),g(a.x-l.x)>=1e-9||g(a.y-l.y)>=1e-9)switch(!0){case this.equalWithEpsilon(a.x,f)&&this.lessThanWithEpsilon(a.y,d):if(c=this.equalWithEpsilon(l.x,f),o=this.createVertex(f,c?l.y:d),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;a=o;case this.equalWithEpsilon(a.y,d)&&this.lessThanWithEpsilon(a.x,u):if(c=this.equalWithEpsilon(l.y,d),o=this.createVertex(c?l.x:u,d),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;a=o;case this.equalWithEpsilon(a.x,u)&&this.greaterThanWithEpsilon(a.y,h):if(c=this.equalWithEpsilon(l.x,u),o=this.createVertex(u,c?l.y:h),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;a=o;case this.equalWithEpsilon(a.y,h)&&this.greaterThanWithEpsilon(a.x,f):if(c=this.equalWithEpsilon(l.y,h),o=this.createVertex(c?l.x:f,h),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;if(a=o,c=this.equalWithEpsilon(l.x,f),o=this.createVertex(f,c?l.y:d),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;if(a=o,c=this.equalWithEpsilon(l.y,d),o=this.createVertex(c?l.x:u,d),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;if(a=o,c=this.equalWithEpsilon(l.x,u),o=this.createVertex(u,c?l.y:h),s=this.createBorderEdge(e.site,a,o),r++,n.splice(r,0,this.createHalfedge(s,e.site,null)),i++,c)break;default:throw"Voronoi.closeCells() > this makes no sense!"}r++}e.closeMe=!1}},n.prototype.quantizeSites=function(t){for(var e,r=this.ε,n=t.length;n--;)(e=t[n]).x=Math.floor(e.x/r)*r,e.y=Math.floor(e.y/r)*r},n.prototype.recycle=function(t){if(t){if(!(t instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=t}},n.prototype.compute=function(t,e){var r=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var n=t.slice(0);n.sort(function(t,e){var r=e.y-t.y;return r||e.x-t.x});for(var i,s,a,o=n.pop(),l=0,c=this.cells;;)if(a=this.firstCircleEvent,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))o.x===i&&o.y===s||(c[l]=this.createCell(o),o.voronoiId=l++,this.addBeachsection(o),s=o.y,i=o.x),o=n.pop();else{if(!a)break;this.removeBeachsection(a.arc)}this.clipEdges(e),this.closeCells(e);var f=new Date,u=new this.Diagram;return u.cells=this.cells,u.edges=this.edges,u.vertices=this.vertices,u.execTime=f.getTime()-r.getTime(),this.reset(),u},void 0!==e&&(e.exports=n)},{}],3:[function(t,e,r){"use strict";e.exports=class{constructor(){this.branches={},this.fns=[]}add(t,e){return this.branches[e.name]={p:t,fun:e},this}run(t,e,r=10,n=!1){this.stop=r,this.it=0,this.debug=n,e&&e();let i=void 0;if(t instanceof Function)i=t;else{if(!(i=this.branches[t]))throw"Grammar error: "+i+" method not found. Did you add() it to the grammar?";i=i.fun}for(this.debug&&console.log("Starting grammar with "+i.name),this.fns.push(i);this.fns.length>0;)this.fns.shift()()}take(...t){if(this.it<this.stop){let e=random(t);if("function"==typeof e)this.it++,this.fns.push(e);else{if(!(e in this.branches))throw"Grammar error: "+e+" method not found. Did you add() it to the grammar?";this.debug&&console.log("Branching to "+this.branches[e].fun.name),this.it++,this.fns.push(this.branches[e].fun)}}else console.log("Stopped after "+this.stop+" iterations")}}},{}],4:[function(t,e,r){"use strict";let n=t("./Masonry").Masonry;e.exports=class{static grid(t,e,r,n){let i=[],s=r/t,a=n/e;for(let r=1;r<e;r++)for(let e=1;e<t;e++)i.push(createVector(e*s,r*a));return i}static spiral(t,e,r,n,i,s){let a=[],o=2*Math.PI,l=2*i*Math.PI,c=n/l,f=s/c;for(let n=0;n<t&&!(f>l);n++){let t=c*f,n=f+o,i=e+Math.cos(n)*t,l=r+Math.sin(n)*t;f+=s/t;let u=createVector(i,l);u.r=f,a.push(u)}return a}static rof3(t,e,r,n){let i=[],s=r/3,a=n/3;return i.push(createVector(s+t,a+e)),i.push(createVector(2*s+t,a+e)),i.push(createVector(2*s+t,2*a+e)),i.push(createVector(s+t,2*a+e)),i}static cols(t,e,r){let n=[];for(let i=t.x;i<r;i+=e)n.push(createVector(i,t.y));return n}static rows(t={x:0,y:0},e=10,r=100){let n=[];for(let i=t.y;i<r;i+=e)n.push(createVector(t.x,i));return n}static masonry(t,e,r,i){return new n(t,e,r,i)}}},{"./Masonry":5}],5:[function(t,e,r){"use strict";let n=t("./MasonryGrammar.js");class i{constructor(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}}e.exports.Masonry=class{constructor(t,e,r,n){return this.bricks=[],this.init(t,e,r,n),this.bricks}init(t,e,r,n){this.contextInfo(t,e,r),this.margin&&this.bricks.forEach(t=>{t.x+=n,t.y+=n,t.width-=n,t.width-=n})}contextInfo(t,e,r){var s=n.parse(r),a=[],o=t,l=e,c=0;for(this.bricks.push(new i(0,0,o,l)),a.push(c);s.length>0;){a.push(c);var f=this.bricks[c],u=s[0];if("|"==u.op){var h=this.bricks[c].x;this.bricks.splice(c,1);for(var d=0;d<u.values.length;d++)this.bricks.splice(c+d,0,new i(h,f.y,f.width*u.values[d],f.height)),h+=f.width*u.values[d];a.forEach(function(t,e){a[e]+=u.splits-1})}else if("-"==u.op){var b=this.bricks[c].y;for(this.bricks.splice(c,1),d=0;d<u.values.length;d++)this.bricks.splice(c+d,0,new i(f.x,b,f.width,f.height*u.values[d])),b+=f.height*u.values[d];a.forEach(function(t,e){a[e]+=u.splits-1})}else">"==u.op&&(c=a.shift());s=s.slice(1)}}}},{"./MasonryGrammar.js":6}],6:[function(t,e,r){e.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,r){var n={start:function(){var t,e;t=[],null===(e=u())&&(e=h());for(;null!==e;)t.push(e),null===(e=u())&&(e=h());return t},content:c,number:f,shortActions:u,moveForward:h};if(void 0!==r){if(void 0===n[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="start";var i=0,s=0,a=0,o=[];function l(t){i<a||(i>a&&(a=i,o=[]),o.push(t))}function c(){var t,r,n,a,o,c,u;if(c=i,u=i,91===e.charCodeAt(i)?(t="[",i++):(t=null,0===s&&l('"["')),null!==t){if(null!==(n=f()))for(r=[];null!==n;)r.push(n),n=f();else r=null;null!==r?(93===e.charCodeAt(i)?(n="]",i++):(n=null,0===s&&l('"]"')),null!==n?(44===e.charCodeAt(i)?(a=",",i++):(a=null,0===s&&l('","')),null!==(a=null!==a?a:"")&&null!==(o=null!==(o=f())?o:"")?t=[t,r,n,a,o]:(t=null,i=u)):(t=null,i=u)):(t=null,i=u)}else t=null,i=u;return null!==t&&(t=function(t,e,r){var n=e.map(function(t){return t/100});return{splits:e.length,pos:r||0,values:n}}(0,t[1],t[4])),null===t&&(i=c),null===t&&(c=i,u=i,null!==(t=f())?(44===e.charCodeAt(i)?(r=",",i++):(r=null,0===s&&l('","')),null!==(r=null!==r?r:"")&&null!==(n=null!==(n=f())?n:"")?t=[t,r,n]:(t=null,i=u)):(t=null,i=u),null!==t&&(t=function(t,e,r){for(var n=[],i=0;i<e;i++)n[i]=1/e;return{splits:e,pos:r||0,values:n}}(0,t[0],t[2])),null===t&&(i=c)),t}function f(){var t,r,n,a,o,c,f,u;if(o=i,c=i,/^[0-9]/.test(e.charAt(i))?(r=e.charAt(i),i++):(r=null,0===s&&l("[0-9]")),null!==r)for(t=[];null!==r;)t.push(r),/^[0-9]/.test(e.charAt(i))?(r=e.charAt(i),i++):(r=null,0===s&&l("[0-9]"));else t=null;if(null!==t){if(f=i,46===e.charCodeAt(i)?(r=".",i++):(r=null,0===s&&l('"."')),null!==r){if(/^[0-9]/.test(e.charAt(i))?(a=e.charAt(i),i++):(a=null,0===s&&l("[0-9]")),null!==a)for(n=[];null!==a;)n.push(a),/^[0-9]/.test(e.charAt(i))?(a=e.charAt(i),i++):(a=null,0===s&&l("[0-9]"));else n=null;null!==n?r=[r,n]:(r=null,i=f)}else r=null,i=f;null!==(r=null!==r?r:"")?(44===e.charCodeAt(i)?(n=",",i++):(n=null,0===s&&l('","')),null!==(n=null!==n?n:"")?t=[t,r,n]:(t=null,i=c)):(t=null,i=c)}else t=null,i=c;return null!==t&&(u=t[0],t=parseFloat(u.join(""),10)),null===t&&(i=o),t}function u(){var t,r,n,a,o,f,u;return n=i,a=i,124===e.charCodeAt(i)?(t="|",i++):(t=null,0===s&&l('"|"')),null===t&&(45===e.charCodeAt(i)?(t="-",i++):(t=null,0===s&&l('"-"'))),null!==t&&null!==(r=null!==(r=c())?r:"")?t=[t,r]:(t=null,i=a),null!==t&&(o=t[0],f=t[1],u={op:o,splits:2,pos:0,values:[.5,.5]},null!=f&&f&&(u.splits=f.splits,u.pos=f.pos,u.values=f.values),t=u),null===t&&(i=n),t}function h(){var t,r,n,a;return n=i,a=i,62===e.charCodeAt(i)?(t=">",i++):(t=null,0===s&&l('">"')),null!==t&&null!==(r=null!==(r=f())?r:"")?t=[t,r]:(t=null,i=a),null!==t&&(t=function(t,e){var r={op:">",pos:"1"};return null!=e&&e&&(r.pos=e),r}(0,t[1])),null===t&&(i=n),t}var d=n[r]();if(null===d||i!==e.length){var b=Math.max(i,a),p=b<e.length?e.charAt(b):null,g=function(){for(var t=1,r=1,n=!1,s=0;s<Math.max(i,a);s++){var o=e.charAt(s);"\n"===o?(n||t++,r=1,n=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,r=1,n=!0):(r++,n=!1)}return{line:t,column:r}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,r=[],n=0;n<t.length;n++)t[n]!==e&&(r.push(t[n]),e=t[n]);return r}(o),p,b,g.line,g.column)}return d},toSource:function(){return this._source},SyntaxError:function(e,r,n,i,s){this.name="SyntaxError",this.expected=e,this.found=r,this.message=function(e,r){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(r?t(r):"end of input")+" found."}(e,r),this.offset=n,this.line=i,this.column=s}};return e.SyntaxError.prototype=Error.prototype,e}()},{}],7:[function(t,e,r){"use strict";let n=t("voronoi");e.exports=class{static voronoi(t,e,r,i){let s={xl:t.x,xr:t.x+e,yt:t.y,yb:t.y+r};return(new n).compute(i,s)}static butterflyCurve(t,e,r,n){let i=[],s=r*Math.PI;for(let r=0;r<s;r+=.025){let s=Math.exp(Math.cos(r))-2*Math.cos(n*r)-Math.pow(Math.sin(r/12),5),a=Math.sin(r)*s,o=Math.cos(r)*s;i.push(createVector(a*e+t.x,o*e+t.y))}return i}static hypocycloid(t,e,r,n,i){let s=[],a=r*Math.PI;for(let r=0;r<a;r+=.025){let a=(i-n)*Math.cos(r)+n*Math.cos((i-n)/n*r),o=(i-n)*Math.sin(r)-n*Math.sin((i-n)/n*r);s.push(createVector(a*e+t.x,o*e+t.y))}return s}static rose(t,e,r,n){let i=[],s=r*Math.PI;for(let t=0;t<s;t+=.025){let e=Math.cos(n*t)*Math.cos(t),r=Math.cos(n*t)*Math.sin(t);i.push(createVector(e,r))}return i}static rossler(t,e,r,n,i,s,a){function o(t,e,r,n,i,s){return{x:-(e+r),y:t+n*e,z:i+r*(t-s)}}let l=t.x,c=t.y,f=.1,u=.1,h=.1,d=0,b=0,p=0;for(let t=0;t<r;t++){let t=o(f,u,h,n,i,s);d=f+a*t.x,b=u+a*t.y,p=h+a*t.z,createVector(d*e+l,b*e+c,p),f=d,u=b,h=p}return[]}static lorentz(t,e,r,n,i,s,a,o,l,c){function f(t,e,r,n,i,s){return{x:n*(e-t),y:t*(i-r)-e,z:t*e-s*r}}let u=0,h=0,d=0,b=[];for(let p=0;p<r;p++){let r=f(n,i,s,a,o,l);u=n+c*r.x,h=i+c*r.y,d=s+c*r.z,b.push(createVector(u*e+t.x,h*e+t.y,d)),n=u,i=h,s=d}return b}static attractor(t,e,r){let n=[],i=[],s=.1,a=.1,o=360%r.length;for(let t=0;t<r.length;t++)n[t]=(r.charCodeAt(t)-65-12)/10;i.push({x:t.x+50*Math.cos(o),y:t.y+58*Math.sin(o),r:0});for(let r=0;r<e;r++){let e=n[0]+n[1]*s+n[2]*s*s+n[3]*s*a+n[4]*a+n[5]*a*a,r=n[6]+n[7]*s+n[8]*s*s+n[9]*s*a+n[10]*a+n[11]*a*a,o=t.x*e+t.x,l=t.y*r+t.y;i.push(createVector(Math.abs(o),Math.abs(l))),s=e,a=r}return i}static dejon(t,e,r,n,i,s=100,a=10){let o=[],l=1,c=1;for(let f=0;f<a;f++){let a=Math.sin(e*c)-Math.cos(r*l),f=Math.sin(n*l)-Math.cos(i*c);o.push(createVector(s*l+t.x+s,s*c+t.y-s)),l=a,c=f}return o}}},{voronoi:2}],8:[function(t,e,r){"use strict";let n=t("./Points");class i{constructor(t,e={}){this.style=e,this.instrs=[],this.parent=t,this.ctx=t.ctx,this.clippedBy=void 0}clone(t={}){let e=JSON.parse(JSON.stringify(this.style));Object.keys(t).forEach(r=>e[r]=t[r]);let r=new i(this.parent,e);return delete r.style.hide,r.instrs=JSON.parse(JSON.stringify(this.instrs)),r}m(t,e){let r="object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.instrs.push({instr:"m",p:r}),this}l(t,e){let r="object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.instrs.push({instr:"l",p:r}),this}bezier(t,e,r){return this.instrs.push({instr:"b",c1:{x:t.x,y:t.y,z:t.z},c2:{x:e.x,y:e.y,z:e.z},p2:{x:r.x,y:r.y,z:r.z}}),this}bc(t){let e=this.instrs[this.instrs.length-1];if("b"!==e.instr)throw"Previous instruction to bc() must be bezier()";return this.bezier(Object.assign({},e.c1),Object.assign({},e.c2),t),this}arc(t,e,r){return this.instrs.push({instr:"a",p1:{x:t.x,y:t.y,z:t.z},p2:{x:e.x,y:e.y,z:e.z},r:r}),this}quad(t,e){return this.instrs.push({instr:"q",c:{x:t.x,y:t.y,z:t.z},p:{x:e.x,y:e.y,z:e.z}}),this}center(){let t=0,e=createVector(0,0);return this.instrs.forEach(r=>{Object.keys(r).filter(t=>"instr"!==t).forEach(t=>{e.add(r[t].x,r[t].y)}),t+=Object.keys(r).length-1}),t&&e.div(t),e}shadow(t=0,e="black",r=1,n=5,i=5){return this.ctx.shadowBlur=t,this.ctx.shadowColor=e,this.ctx.shadowOffsetX=n,this.ctx.shadowOffsetY=i,this.ctx.shadowAlpha=r,this}moveTo(t,e){let r="object"==typeof t?t:{x:t,y:e},n=this.center(),i=r.x-n.x,s=r.y-n.y;return this.instrs.forEach(t=>{Object.keys(t).forEach(e=>{"instr"!==e&&(t[e].x+=i,t[e].y+=s)})}),this}rotate(t,e){return e=e||this.center(),this.instrs.forEach(r=>{Object.keys(r).forEach(i=>{"instr"!==i&&(r[i]=n.rotatePoint(r[i],t,e))})}),this}draw(t=1){if(this.ctx.save(),this.clippedBy){let t=new Path2D;t.rect(this.clippedBy.x,this.clippedBy.y,this.clippedBy.w,this.clippedBy.h),this.ctx.clip(t)}return this.style.filter&&(this.ctx.filter=this.style.filter),this.ctx.beginPath(),this.instrs.forEach(e=>{switch(e.instr){case"m":this.ctx.moveTo(e.p.x*t,e.p.y*t);break;case"l":this.ctx.lineTo(e.p.x*t,e.p.y*t);break;case"b":this.ctx.bezierCurveTo(e.c1.x*t,e.c1.y*t,e.c2.x*t,e.c2.y*t,e.p2.x*t,e.p2.y*t);break;case"a":this.ctx.arcTo(e.p1.x*t,e.p1.y*t,e.p2.x*t,e.p2.y*t,e.r);break;case"q":this.ctx.quadraticCurveTo(e.c.x*t,e.c.y*t,e.p.x*t,e.p.y*t);break;case"arc":this.ctx.arc(e.p.x*t,e.p.y*t,e.r,e.sa,e.ea,e.cw)}}),this._applyStyle(),this}_applyStyle(){this.style.fill?(this.ctx.globalAlpha="alpha"in this.style?this.style.alpha:1,this.ctx.fillStyle=this.style.fill,this.ctx.fill()):this.ctx.noFill,this.ctx.globalAlpha=this.style.strokeAlpha||this.style.alpha||1,(this.style.strokeWidth||this.style.stroke)&&(this.ctx.strokeStyle=this.style.stroke||"black",this.ctx.lineWidth=this.style.strokeWidth||1,this.ctx.stroke()),this.style.shadow&&(this.ctx.shadowColor=this.style.shadow,this.ctx.shadowOffsetX=10,this.ctx.shadowOffsetY=10),this.ctx.lineCap=this.style.lineCap||"butt",this.ctx.restore(),this.ctx.setTransform(1,0,0,1,0,0)}fromPoints(t,e,r=10,n=0){let i=e.x-t.x,s=e.y-t.y,a=Math.sqrt(i*i+s*s),o={x:t.x-n,y:t.y-r/2},l={x:t.x+a+n,y:t.y-r/2},c={x:t.x+a+n,y:t.y+r/2},f={x:t.x-n,y:t.y+r/2};this.m(o).l(l).l(c).l(f).l(o);let u=e.x-t.x,h=e.y-t.y,d=Math.atan2(h,u)*(180/Math.PI);return this.rotate(d,t),this}circle(t,e=10,r=0,n=2*Math.PI,i=!0){return this.instrs.push({instr:"arc",p:t,r:e,sa:r,ea:n,cw:i}),this}rect(t,e,r){return this.fromPoints({x:t.x,y:t.y+r/2},{x:t.x+e,y:t.y+r/2},r)}line(t,e){return this.m(t).l(e),this}clip(t,e,r,n){return this.clippedBy={x:t,y:e,w:r,h:n},this}}e.exports=i},{"./Points":9}],9:[function(t,e,r){"use strict";e.exports=class{static subd(t,e=1){let r=[];for(let e=1;e<t.length;e++)r.push(t[e-1],{x:(t[e-1].x+t[e].x)/2,y:(t[e-1].y+t[e].y)/2});return r.push(t[t.length-1]),r}static rects(t,e){for(let e=0;e<t.length;e++)Math.sqrt(t[e].x*t[e].x+t[e].y*t[e].y)}static rslice(t,e,r){let n=r-e,i=Math.round(random()*t.length)-n,s=i+Math.round(n*random());return console.log(s-i),t.slice(i,s)}static noise(t,e){return t.map(function(t){return{x:t.x+random()*e,y:t.y+random()*e}})}static closest(t,e){let r=void 0,n=1e10;return e.filter(e=>e.x!==t.x&&e.y!==t.y).forEach(e=>{let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));i<n&&(n=i,r=e)}),r}static rotatePoint(t,e,r){let n=e*Math.PI/180,i=Math.cos(n),s=Math.sin(n),a=t.x-r.x,o=t.y-r.y;return{x:i*a-s*o+r.x,y:s*a+i*o+r.y}}}},{}],10:[function(t,e,r){(function(r){let n=t("./Layout"),i=t("./Path"),s=t("./Parametrics"),a=t("./Grammar"),o=t("./Points"),l=t("chroma-js");function c(t){console.log("Chalks:",t)}r.chroma=l;p5.Vector.prototype.cadd=function(t,e,r){let n="function"==typeof t?t():t,i="function"==typeof e?e():e,s="function"==typeof r?r():r;return createVector(this.x,this.y,this.z).add(n,i,s)},p5.prototype.r=function(t,e,r){return random(t,e,r)},p5.prototype.vector=function(t,e,r){return createVector(t,e,r)},e.exports=class{constructor(t={},e={}){this.start=Date.now(),this.scale=t.scale||1,t.width&&t.height?(this.width=t.width*this.scale,this.height=t.height*this.scale,this.p5canvas=createCanvas(this.width,this.height),c(`creating canvas ${this.width}x${this.height}`)):(this.width=t.width*this.scale||p5.instance.canvas.width,this.height=t.height*this.scale||p5.instance.canvas.height,this.p5canvas=p5.instance.canvas,c(`reusing existing canvas ${this.width}x${this.height}`)),this.canvas=document.getElementById("defaultCanvas0"),this.ctx=this.canvas.getContext("2d"),this.seed=t.seed?t.seed:(1e4*Math.random()).toString().substr(5,8),c("using seed="+this.seed),randomSeed(this.seed),this.drawBackground(this.width,this.height,e),this._modules()}_modules(){this.Layout=n,this.Path=i,this.Parametrics=s,this.Grammar=a,this.Points=o}drawBackground(t,e,r){this.ctx.fillStyle=r.fill||"white",this.ctx.fillRect(0,0,t,e),this.ctx.fillStyle="black"}setStyle(t){this.drawBackground(this.width,this.height,t)}path(t){return new i(this,t)}lgrad(t,e,r){let n=this.ctx.createLinearGradient(0,0,1e3,1e3);return r.forEach(t=>n.addColorStop(t[0],t[1])),n}rgrad(t,e,r,n,i){let s=this.ctx.createRadialGradient(t.x,t.y,e,r.x,r.y,n);return i.forEach(t=>s.addColorStop(t[0],t[1])),s}draw(t=1,e){this.ctx.imageSmoothingQuality="high",this.ctx.save(),this.clipped&&this.ctx.clip(this.clipped),c("ended ("+(Date.now()-this.start)/1e3+" secs)"),e&&saveCanvas(this.p5canvas,e,"png"),this.ctx.restore(),noLoop()}clipTo(t,e,r,n){let i=new Path2D;i.rect(t,e,r,n),this.clipped=i}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Grammar":3,"./Layout":4,"./Parametrics":7,"./Path":8,"./Points":9,"chroma-js":1}]},{},[10])(10)});
